{% load static %}
{% include "Panel/header.html" %}
<style type="text/css">
    .table-bordered th , td , tr{
        border: 1px solid #000!important;
    }
    .table{
        width: 88% !important;
        table-layout: auto;
    }
    .table-bordered td{
        font-size: 12px;
    }
    .table-bordered th{
        font-size: 12px;
        padding: 4px;
    }
    .table-bordered td{
        padding: 3px;
    }
    .f-color{
        color: #000;
    }
    .green-bg{
        background-color: #79ee9b;
    }
    .red-bg{
        background-color: #ff5f5f;
    }
    .f-c-red{
        color: red;
    }
    .f-c-green{
        color: green;
    }
    .f-c-white{
        color: #fff;
    }
    .button-style{
        height: 140px !important; 
        border: 1px solid#000; 
        background-color:#ffd966; 
        width: 12%;
        border-left:hidden; 
        float:right;
    }
    .button-1{
        margin-bottom: 10px; 
        margin-left: 10px; 
        margin-top: 8px;
        background-color:white;
    }
    .button-2{
        margin-bottom: 10px; 
        margin-left: 10px;
        background-color:white;
    }
    .button-3{
        margin-left: 10px; 
        background-color:white;
    }
    .bg-1{
        background-color: #10b5f1;
    }
    .bg-2{
        background-color:#ffd966;
    }
    .bg-3{
        background-color: #d9e1f2;
    }
    .bg-4 {
        background-color:#92ddf9;
    }
    .bg-5{
        background-color:#ff4a4a;
    }
    .bg-6{
        background-color:#ffff96;
    }
    .bg-7{
        background-color:#c00000;
    }
    .bg-black{
        background-color:#000;
    }
    .darkred-bg{
        background-color:#ff0000;
    }
    .sl-bg{
        background-color:#febaac;
    } 
    .buy-bg{
        background-color:#305496;
    }
    .bg-yello{
        background-color: #ffc000;
    }
    .light-red{
        background-color:#fce4d6;
    }
	td{
		text-align: center;
	}
	.app-main__inner{font-weight:750;}
	
	
	.loader2{
	  width: 100px;
	  height: 100px;
	  border-radius: 100%;
	  position: relative;
	  margin: 0 auto;
	}


	/* LOADER 6 */

	#loader-6{
	  top: 40px;
	  left: -2.5px;
	}

	#loader-6 span{
	  display: inline-block;
	  width: 5px;
	  height: 20px;
	  background-color: #53a591;
	}

	#loader-6 span:nth-child(1){
	  animation: grow 1s ease-in-out infinite;
	}

	#loader-6 span:nth-child(2){
	  animation: grow 1s ease-in-out 0.15s infinite;
	}

	#loader-6 span:nth-child(3){
	  animation: grow 1s ease-in-out 0.30s infinite;
	}

	#loader-6 span:nth-child(4){
	  animation: grow 1s ease-in-out 0.45s infinite;
	}

	@keyframes grow{
	  0%, 100%{
		-webkit-transform: scaleY(1);
		-ms-transform: scaleY(1);
		-o-transform: scaleY(1);
		transform: scaleY(1);
	  }

	  50%{
		-webkit-transform: scaleY(1.8);
		-ms-transform: scaleY(1.8);
		-o-transform: scaleY(1.8);
		transform: scaleY(1.8);
	  }
	}
	<!-- #hideloader -->
	<!-- { -->
		<!-- display: none; -->
	<!-- } -->
	.tug_of_war{
		background-color: #FDFD96;
	}
	.mild_support{
		background-color:#96b85d;
		color: white;
	}
	.mild_resistence{
		background-color: #ffcccb;
		color: red;
	}
	.strong_support{
		background-color: lightgreen;
	}
	.strong_resistence{
		background-color: #fe5a1d;
		color: white;
	}
	.select_support_resistence{
		width: 100%;
		font-size: 14px;
		font-weight: 700;
		test-align: center;
		text-align-last: center;
<!-- padding-right: 35px; -->

		<!-- color: black; -->
		
	<!-- } -->
	#canvas_container{
		width: 250px !important; 
		display: block !important; 
		height: 140px !important;
		<!-- margin-top: 10px !important; -->
	}
	.closed-sidebar #canvas_container{
		width: 250px !important; 
		display: block !important; 
		height: 140px !important;
		<!-- margin-top: 10px !important; -->
	}
	#sentiment_chart{
		margin-left: 15px;
		width: 303px !important; 
		display: block !important; 
		height: 125px !important;
		<!-- margin-top: 10px !important; -->
	}
	.closed-sidebar #sentiment_chart{
		margin-left: 30px;
		width: 333px !important; 
		display: block !important; 
		height: 125px !important;
		<!-- margin-top: 10px !important; -->
	}
	
</style>
<div class="app-main__inner" style="padding: 15px 0px 0 !important;">             
<div class="tabs-animation">
                        
<div class="col-lg-12">
<row>
<div class="main-card mb-3 card">
<div class="card-body">
<h5 class="card-title">OI Analysis Dashboard</h5>

	<div class="row mb-3">
		<div class="col-md-2">
			<label class="fw-bold text-uppercase">Select Script:</label>
			<select class="form-control" onchange="chain_type()" name="testing" id="testing">
				<option value="1">NIFTY</option>
				<option value="2">BANKNIFTY</option>
			</select>
		</div>
		<div class="col-md-2">
			<label class="fw-bold text-uppercase">Expiry Date:</label>
			<select class="form-control" onchange="exp_date()" name="expiry" id="id_expiry_date_select">
				{% for date in date_list %}
					<option value="{{date}}">{{date}}</option>
				{% endfor %}
			</select>
		</div>
		<div class="col-md-1">
			<label class="text-uppercase font-weight-normal" style="font-size: 18px;">NIFTY </label>
			
			<!-- <h4><span id="id_ltp_price" class="badge badge-secondary">17000</span></h4> -->
		</div>
		<div class="col-md-2" style="margin-left: -30px">
			<input type="hidden" value="" id="id_nifty_open">
			<input type="hidden" value="" id="id_nifty_close">
			<span id="id_ltp_price" class="font-weight-normal" style="font-size: 20px; color:red;"> 17000</span><br>
			<span id="id_nifty_diff" class="font-weight-normal" style="font-size: 16px;">17000 </span>(<span style="font-size: 16px;" id="id_nifty_change" class="font-weight-normal">17000</span> %)
		</div>
		<div style="border-right:1px solid lightgrey;">
		</div>
		<div class="col-md-2">
			<label class="text-uppercase font-weight-normal" style="font-size: 18px;">BANK NIFTY </label>
			
			<!-- <h4><span id="id_ltp_price" class="badge badge-secondary">17000</span></h4> -->
		</div>
		<div class="col-md-2" style="margin-left: -70px">
			<input type="hidden" value="" id="id_bank_nifty_open">
			<input type="hidden" value="" id="id_bank_nifty_close">
			<span id="id_bnf_ltp_price" class="font-weight-normal" style="font-size: 20px; color:red;"> 17000</span><br>
			<span id="id_bnf_diff" class="font-weight-normal" style="font-size: 16px;">17000 </span>(<span style="font-size: 16px;" id="id_bnf_change" class="font-weight-normal">17000</span> %)
		</div>
		<!-- <div class="col-md-1 ml-4"> -->
			<!-- <label class="fw-bold text-uppercase">Difference:</label> -->
			<!-- <h4><span id="id_nifty_diff" class="badge badge-secondary">17000</span></h4> -->
		<!-- </div> -->
		<!-- <div class="col-md-1  ml-4"> -->
			<!-- <label class="fw-bold text-uppercase">Change:</label> -->
			<!-- <h4><span id="id_nifty_change" class="badge badge-secondary">17000</span></h4> -->
		<!-- </div> -->
		<!-- <div class="col-md-2  ml-4"> -->
			<!-- <label class="fw-bold text-uppercase">NIFTY BANK:</label> -->
			<!-- <h4><span id="id_bnf_ltp_price" class="badge badge-primary">17000</span></h4> -->
		<!-- </div> -->
		<!-- <div class="col-md-1" style="margin-left: -70px;"> -->
			<!-- <label class="fw-bold text-uppercase">Difference:</label> -->
			<!-- <h4><span id="id_bnf_diff" class="badge badge-primary">17000</span></h4> -->
		<!-- </div> -->
		<!-- <div class="col-md-1  ml-2"> -->
			<!-- <label class="fw-bold text-uppercase">Change:</label> -->
			<!-- <h4><span id="id_bnf_change" class="badge badge-primary">17000</span></h4> -->
		<!-- </div> -->
		
	</div>
	<table class="mb-0 table table-bordered" id="option_analysis_table" style="width: 100% !important;">
		<thead>
			<tr>
				<td colspan="7" class="text-center" style="background: lightgreen;">CE</td>
				<th class="text-center" style="background: #fe5a1d; color: white;">Strike</th>
				<th colspan="7" class="text-center" style="background: red; color: white;">PE</th>
			<tr>
			<tr class="text-center">
				<th style="background: #fe5a1d; color: white;">Interpretation</th>
				<th style="background: #fe5a1d; color: white;">OI</th>
				<th style="background: #fe5a1d; color: white;">Change OI</th>
				<th style="background: #fe5a1d; color: white;">Volume</th>
				<th style="background: #fe5a1d; color: white;">Price Change</th>
				<th style="background: #fe5a1d; color: white;">LTP</th>
				<th style="background: #fe5a1d; color: white;">IV</th>
				<th style="background: #fe5a1d; color: white;">Price</th>
				<th style="background: #fe5a1d; color: white;">IV</th>
				<th style="background: #fe5a1d; color: white;">LTP</th>
				<th style="background: #fe5a1d; color: white;">Price Change</th>
				<th style="background: #fe5a1d; color: white;">volume</th>
				<th style="background: #fe5a1d; color: white;">Change OI</th>
				<th style="background: #fe5a1d; color: white;">OI</th>
				<th style="background: #fe5a1d; color: white;">Interpretation</th>
				<!-- <th class="f-color bg-1" style="background: #FFFF8F;">SPOT</th> -->
				<th class="f-color bg-1" style="background: #FFFF8F;">PCR</th>
				<th class="f-color bg-1" style="background: #FFFF8F;">Netchange</th>
			</tr>
			<tr id="hideloader">
				<td colspan="18">
					<div class="container">
						<div class="row cf">
						  <div class="three col">
					  
							<div class="loader2" id="loader-6">
							  <span></span>
							  <span></span>
							  <span></span>
							  <span></span>
							</div>
						  </div>
						
						</div>
					</div>
				</td>
			 </tr>
			<tr id="id_date_error" style="display:none; height: 80px;">
				<td colspan="18" style=" font-size: 16px; background: lightgrey;">
					Data For The Selected Date Is Not Available
				</td>
			<tr>
		</thead>
		<tbody id="tbodyid">
		</tbody>
	</table> 

<div class="row">
	<div class="col-md-4">
		<table class="mb-0 mt-2 table table-bordered" id="sentiments_table" style="width: 100% !important;">
			<thead>
				<tr class="text-center">
					<th style="background: #FDFD66; color: black;">Data</th>
					<th style="background: #FDFD66; color: black;">Call</th>
					<th style="background: #FDFD66; color: black;">Put</th>
				</tr>
			</thead>
			<tbody id="sentiments_table_body">
				<tr class="text-center">
					<td>Long Liquidition</td>
					<td id="id_ll_call" style="color:red;">0</td>
					<td id="id_ll_put" style="color:green;">0</td>
				</tr>
				<tr class="text-center">
					<td>Short Build Up</td>
					<td id="id_sbu_call" style="color:red;">0</td>
					<td id="id_sbu_put" style="color:green;">0</td>
				</tr>
				<tr class="text-center">
					<td id="id_">Short Covering</td>
					<td id="id_sv_call"  style="color:green;">0</td>
					<td id="id_sv_put"  style="color:red;">0</td>
				</tr>
				<tr class="text-center">
					<td id="id_">Long Build Up</td>
					<td id="id_lbu_call" style="color:green;">0</td>
					<td id="id_lbu_put" style="color:red;">0</td>
				</tr>
				<tr>
					<td colspan="3"></td>
				</tr>
				<tr class="text-center">
					<td rowspan="3">Sentiments</td>
					<td style="background:lightgreen;">Bullish</td>
					<td style="background:red; color: white;">Bearish</td>
				</tr>
				<tr class="text-center">
					<td id="id_bullish_total" style="color: green;">0</td>
					<td id="id_bearish_total" style="color: red;">0</td>
				</tr><tr class="text-center">
					<td colspan="2" id="id_sentiment_percentage">100%</td>
				</tr>
				<tr>
					<td colspan="3" rowspan="4">
						Sentiments
						<p style="float:left; color:red;">BEARISH: <span id="id_bear_perc"></span>%</p>
						<p style="float:right; color:green;">BULLISH: <span id="id_bull_perc"></span>%</p>
						<div id="canvas_container" style="">
							<canvas id="sentiment_chart" style=""></canvas>
						</div>
					</td>
				</tr>
			</tbody>
		</table>  
	</div>
	<div class="col-md-8 text-center">
		<table class="mb-0 mt-2 table table-bordered" id="sentiments_table" style="width: 100% !important;">
			<thead>
				<tr>
					<td colspan="5" class="text-center" style="font-size: 15px;">Support and Resistence analysis with OI</td>
					<th rowspan="">
						<select id="id_support_resistence_select" onchange="change_l_o_c()" class="form-control">
							<option value="ltp">LTP</option>
							<option value="open">OPEN</option>
							<option value="close">CLOSE</option>
						</select>
					</th>
				<tr>
				<tr style="background: lightgrey;" id="hideloader">
					<th>CPR</th>
					<th>OI</th>
					<th>Strike Price</th>
					<th>OI</th>
					<th>PCR</th>
					<th>Analysis</th>
				 </tr>
			</thead>
			
			<tbody id="sentiments_table_body">
				<tr>
					<td id="id_cpr_1"></td>
					<td id="id_ce_oi_1"></td>
					<td id="id_strike_price_1"></td>
					<td id="id_pe_oi_1"></td>
					<td style="color:red;" id="id_pcr_1"></td>
					<td>
						<select class="tug_of_war select_support_resistence" id="id_sentiment_analysis_1_select" onchange="save_sentiment_1(this);">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td id="id_cpr_2"></td>
					<td id="id_ce_oi_2"></td>
					<td id="id_strike_price_2"></td>
					<td id="id_pe_oi_2"></td>
					<td style="color:red;" id="id_pcr_2"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_2_select" onchange="save_sentiment_2(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td id="id_cpr_3"></td>
					<td id="id_ce_oi_3"></td>
					<td id="id_strike_price_3"></td>
					<td id="id_pe_oi_3"></td>
					<td style="color:red;" id="id_pcr_3"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_3_select" onchange="save_sentiment_3(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td id="id_cpr_4"></td>
					<td id="id_ce_oi_4"></td>
					<td id="id_strike_price_4"></td>
					<td id="id_pe_oi_4"></td>
					<td style="color:red;" id="id_pcr_4"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_4_select" onchange="save_sentiment_4(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="color:green;" id="id_cpr_5"></td>
					<td id="id_ce_oi_5"></td>
					<td id="id_strike_price_5"></td>
					<td id="id_pe_oi_5"></td>
					<td style="color:red;" id="id_pcr_5"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_5_select" onchange="save_sentiment_5(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="color:green;" id="id_cpr_6"></td>
					<td id="id_ce_oi_6"></td>  
					<td id="id_strike_price_6"></td>
					<td id="id_pe_oi_6"></td>
					<td id="id_pcr_6"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_6_select" onchange="save_sentiment_6(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="color:green;" id="id_cpr_7"></td>
					<td id="id_ce_oi_7"></td>
					<td id="id_strike_price_7"></td>
					<td id="id_pe_oi_7"></td>
					<td id="id_pcr_7"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_7_select" onchange="save_sentiment_7(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="color:green;" id="id_cpr_8"></td>
					<td id="id_ce_oi_8"></td>
					<td id="id_strike_price_8"></td>
					<td id="id_pe_oi_8"></td>
					<td id="id_pcr_8"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_8_select" onchange="save_sentiment_8(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				<tr>
					<td style="color:green;" id="id_cpr_9"></td>
					<td id="id_ce_oi_9"></td>
					<td id="id_strike_price_9"></td>
					<td id="id_pe_oi_9"></td>
					<td id="id_pcr_9"></td>
					<td>
						<select class="select_support_resistence" id="id_sentiment_analysis_9_select" onchange="save_sentiment_9(this)">
							<option class="tug_of_war" value="tug_of_war" >Tug of War</option>
							<option class="mild_support" value="mild_support">Mild Support</option>
							<option class="mild_resistence" value="mild_resistence">Mild Resistence</option>
							<option class="strong_support" value="strong_support">Strong Support</option>
							<option class="strong_resistence" value="strong_resistence">Strong Resistence</option>
						</select>
					</td>
				</tr>
				
			</tbody>
		</table>  
	</div>
</div>
	
</div>
</div>



</row>

</div>
<div id='app'>

</div>
</div>
</div>
<!-- <script> -->
	<!-- {% if user.subscription_status == 'Inactive' or not user.subscription_status %} -->
		<!-- let timerInterval; -->
		<!-- Swal.fire({ -->
		  <!-- title: 'Warning!', -->
		  <!-- html: 'You Do Not Have Any Active Subscription', -->
		  <!-- timer: 5000, -->
		  <!-- buttons: false, -->
		  <!-- timerProgressBar: true, -->
		  <!-- didOpen: () => { -->
			<!-- Swal.showLoading() -->
			<!-- const b = Swal.getHtmlContainer().querySelector('b') -->
			<!-- timerInterval = setInterval(() => { -->
			  <!-- b.textContent = Swal.getTimerLeft() -->
			<!-- }, 100) -->
		  <!-- }, -->
		  <!-- allowOutsideClick: false, -->
		  <!-- willClose: () => { -->
			<!-- clearInterval(timerInterval) -->
		  <!-- }, -->
		<!-- }).then((result) => { -->
		  <!-- if (result.dismiss === Swal.DismissReason.timer)  -->
		  <!-- { -->
			<!-- location.href = "/#criptocurrency-price-section"; -->
		  <!-- } -->
		<!-- }) -->
	<!-- {% endif %} -->
<!-- </script> -->
<script>
function create_sentiment_graph(ce, pe)
{
	$('#id_bull_perc').html(ce);
	$('#id_bear_perc').html(pe);
	var xValues = ["CE", "PE"];
	var yValues = [ce, pe];
	var barColors = [
	  "lightgreen",
	  "red",
	];

	new Chart("sentiment_chart", {
	  type: "doughnut",
	  data: {
		labels: xValues,
		datasets: [{
		  backgroundColor: barColors,
		  data: yValues,
		}]
	  },
	  options: {
		 animation: {
			duration: 0, // general animation time
		},
		events: [],
		legend: {
			display: false
		},
		title: {
		  display: false,
		},
		cutoutPercentage: 75,
	  }
	});
}
</script>
<script>
	function change_support_resistence_support()
	{
		var type = $('#id_support_resistence_select').val();
		
		if (type == 'ltp')
		{
			support_and_resistence_count = 0;
			support_and_resistence_open_count = 1;
			support_and_resistence_close_count = 1;
		}
		else if (type == 'open')
		{
			support_and_resistence_count = 1;
			support_and_resistence_open_count = 0;
			support_and_resistence_close_count = 1;
		}
		else if(type == 'close')
		{
			support_and_resistence_count = 1;
			support_and_resistence_open_count = 1;
			support_and_resistence_close_count = 0;
		}
	}
</script>
<script>
	var temp_user_id = '{{request.session.user_id}}';
	function get_support_resistence_class(strike_price, select_id, strike_id)
	{
		$.ajax({
			method: "POST",
			url: "/get_Support_Resistence/",
			data: {
				'user_id':temp_user_id,
				'strike_price':strike_price,
			},
			success: function (response) 
			{	
				if(response.status == '1')
				{
					$('#'+select_id).removeClass();
					$('#'+select_id).addClass(response.msg);
					$('#'+strike_id).removeClass();
					$('#'+strike_id).addClass(response.msg);
					$('#'+select_id).addClass('select_support_resistence');
					$('#'+select_id).val(response.msg);
				}
				else
				{
				
				}
			}
		});
	}
</script>
<script>
function indianRupee(x)
{
	var number = parseFloat(x);
	return number.toLocaleString("en-IN", {minimumFractionDigits: 0, maximumFractionDigits: 0, currency: 'INR'})
}
<!-- var now_after_close = new Date(); -->
<!-- var dateTime_after_close = new Date (new Date().toDateString() + ' ' + '15:30'); -->
<!-- if (now_after_close.getTime() > dateTime_after_close.getTime())  -->
<!-- { -->
	<!-- $('#hideloader').hide(); -->
<!-- } -->
<!-- else -->
{
var support_and_resistence_count = 0;
var support_and_resistence_open_count = 1;
var support_and_resistence_close_count = 1;
	var socket = null;

	let { createApp } = Vue;

	let CoinsApp = {
		data(){
			return {
				coin: 'Just a text',
				text: null,
			}
		},
		created(){
			let chain_type = $('#testing :selected').text();
			let exp_date = $.trim($('#id_expiry_date_select :selected').text());


			socket = new WebSocket(`ws://${window.location.host}/ws/optionchain/${chain_type}/${exp_date}/`);

			let _this = this;
			
			
			var ltp_value_array = new Array();
			var open_value_array = new Array();
			var close_value_array = new Array();
			socket.onmessage = function(event)
			{
				$('#hideloader').hide();
				_this.test = JSON.parse(event.data);
				
				if (_this.test['live_data'] == 'none')
				{
					
				}
				else
				{
					<!-- console.log(JSON.parse(_this.test['option_chain'])); -->
					
					_this.live_dict = JSON.parse(_this.test['live_data']);
					
					<!-- console.log(_this.live_dict); -->
					
					if (_this.live_dict['symbol'] == 'NIFTY 50')
					{
						$('#id_ltp_price').html(_this.live_dict['ltp']);
						
						$('#id_nifty_open').val(_this.live_dict['day_open']);
						$('#id_nifty_close').val(_this.live_dict['prev_day_close']);
						
						if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
						{
							 $('#id_ltp_price').css('color', 'red');
						}
						else
						{
							$('#id_ltp_price').css('color', 'green');
						}
						
						$('#id_nifty_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
						
						$('#id_nifty_change').html((_this.live_dict['change_perc']).toFixed(2));
					}
					else if(_this.live_dict['symbol'] == 'NIFTY BANK')
					{
						$('#id_bnf_ltp_price').html(_this.live_dict['ltp']);
						
						$('#id_bank_nifty_open').val(_this.live_dict['day_open']);
						$('#id_bank_nifty_close').val(_this.live_dict['prev_day_close']);
						
						if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
						{
							 $('#id_bnf_ltp_price').css('color', 'red');
						}
						else
						{
							$('#id_bnf_ltp_price').css('color', 'green');
						}
						
						$('#id_bnf_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
						
						$('#id_bnf_change').html((_this.live_dict['change_perc']).toFixed(2));
					}
					
					_this.option_data = JSON.parse(_this.test['option_chain']);
					
					var tbodyRef = document.getElementById('option_analysis_table').getElementsByTagName('tbody')[0];
							
					$("#tbodyid").empty();
					
					var count_row = 0;
					
					var call_oi_val = 0;
					
					
					var support_resistence_type = $('#id_support_resistence_select').val();
					
					var open_new_strike_price = null;
					var close_new_strike_price = null;
					var open_call_oi_val = null;
					var close_call_oi_val = null;
					
					if (support_resistence_type == 'open')
					{
						if (support_and_resistence_open_count == 0)
						{
							var enter_strike_price = Math.round(parseFloat($('#id_nifty_open').val())).toString();
							last2 = enter_strike_price.slice(-2);
							var diff = 0;
							var new_enter_strike_price = 0.0;
							if(last2 >= 90)
							{
								diff = 100 - parseInt(last2); 
								new_enter_strike_price = parseInt(enter_strike_price) + diff;
							}
							else if(last2 < 90)
							{
								new_enter_strike_price = enter_strike_price - last2;
							}
							else
							{
								new_enter_strike_price = enter_strike_price;
							}
							
							var arr_low = new Array();
							var arr_high = new Array();
							var array_high_val = 0;
							var array_low_val = 0;
							
							var count_temp = 100;
							arr_low.push(parseInt(new_enter_strike_price));
							for(var i = 0; i<4; i++)
							{
								arr_low.push(parseInt(new_enter_strike_price) - count_temp);
								arr_high.push(parseInt(new_enter_strike_price) + count_temp);
								
								count_temp = count_temp + 100;
							}
							arr_low.reverse();
							open_value_array = arr_low.concat(arr_high);
							open_new_strike_price = new_enter_strike_price;
						}
					}
					else if (support_resistence_type == 'close')
					{
						if (support_and_resistence_close_count == 0)
						{
							var enter_strike_price = Math.round(parseFloat($('#id_nifty_close').val())).toString();
							last2 = enter_strike_price.slice(-2);
							var diff = 0;
							var new_enter_strike_price = 0.0;
							if(last2 >= 90)
							{
								diff = 100 - parseInt(last2); 
								new_enter_strike_price = parseInt(enter_strike_price) + diff;
							}
							else if(last2 < 90)
							{
								new_enter_strike_price = enter_strike_price - last2;
							}
							else
							{
								new_enter_strike_price = enter_strike_price;
							}
							
							var arr_low = new Array();
							var arr_high = new Array();
							var array_high_val = 0;
							var array_low_val = 0;
							
							var count_temp = 100;
							arr_low.push(parseInt(new_enter_strike_price));
							for(var i = 0; i<4; i++)
							{
								arr_low.push(parseInt(new_enter_strike_price) - count_temp);
								arr_high.push(parseInt(new_enter_strike_price) + count_temp);
								
								count_temp = count_temp + 100;
							}
							arr_low.reverse();
							close_value_array = arr_low.concat(arr_high)
							
							close_new_strike_price = new_enter_strike_price;
						}
					}
					if (support_and_resistence_count == 0)
					{
						<!-- ltp_value_array = new_array; -->
						<!-- ltp_new_strike_price = new_enter_strike_price; -->
						
						var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
						last2 = enter_strike_price.slice(-2);
						var diff = 0;
						var new_enter_strike_price = 0.0;
						if(last2 >= 90)
						{
							diff = 100 - parseInt(last2); 
							new_enter_strike_price = parseInt(enter_strike_price) + diff;
						}
						else if(last2 < 90)
						{
							new_enter_strike_price = enter_strike_price - last2;
						}
						else
						{
							new_enter_strike_price = enter_strike_price;
						}
						<!-- console.log(new_enter_strike_price); -->
						var arr_low = new Array();
						var arr_high = new Array();
						var array_high_val = 0;
						var array_low_val = 0;
						
						var count_temp = 100;
						arr_low.push(parseInt(new_enter_strike_price));
						for(var i = 0; i<4; i++)
						{
							arr_low.push(parseInt(new_enter_strike_price) - count_temp);
							arr_high.push(parseInt(new_enter_strike_price) + count_temp);
							
							count_temp = count_temp + 100;
						}
						arr_low.reverse();
						ltp_value_array = arr_low.concat(arr_high)
						
						ltp_new_strike_price = new_enter_strike_price;
					}
					<!-- console.log(ltp_value_array); -->
					
					var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
					last2 = enter_strike_price.slice(-2);
					var diff = 0;
					var new_enter_strike_price = 0.0;
					if(last2 >= 90)
					{
						diff = 100 - parseInt(last2); 
						new_enter_strike_price = parseInt(enter_strike_price) + diff;
					}
					else if(last2 < 90)
					{
						new_enter_strike_price = enter_strike_price - last2;
					}
					else
					{
						new_enter_strike_price = enter_strike_price;
					}
					
					var arr_low = new Array();
					var arr_high = new Array();
					var array_high_val = 0;
					var array_low_val = 0;
					
					var count_temp = 50;
					arr_low.push(parseInt(new_enter_strike_price));
					for(var i = 0; i<4; i++) 
					{
						arr_low.push(parseInt(new_enter_strike_price) - count_temp);
						arr_high.push(parseInt(new_enter_strike_price) + count_temp);
						
						count_temp = count_temp + 50;
					}
					arr_low.reverse();
					var new_array = arr_low.concat(arr_high)
					
					var strike_count = 0;
					var open_strike_count = 0;
					var close_strike_count = 0;
					var ltp_strike_count = 0;
					
					var total_call_oi = 0;
					var total_call_change_oi = 0;
					var total_put_oi = 0;
					var total_put_change_oi = 0;
					
					var long_liquidition_ce_total = 0;
					var short_build_up_ce_total = 0;
					var short_covering_ce_total = 0;
					var long_build_up_ce_total = 0;
					
					var long_liquidition_pe_total = 0;
					var short_build_up_pe_total = 0;
					var short_covering_pe_total = 0;
					var long_build_up_pe_total = 0;
					
					_this.option_data.forEach(function(value) 
					{
						if (count_row == 0)
						{
							newRow = tbodyRef.insertRow();
						}
						if (value.type == "CE")
						{
							total_call_oi = total_call_oi + parseFloat(value.oi);
							total_call_change_oi = total_call_change_oi + parseFloat(value.oi_change);
							
							price_change_val = parseFloat(value.price_change);
							change_oi_val = parseFloat(value.oi_change);
							
							sbu_obj = newRow.insertCell();
							
							if (price_change_val > 0 && change_oi_val > 0)
							{
								sbu_obj.style.color="black";
								sbu_obj.style.backgroundColor="lightgreen";
								sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
								
								long_build_up_ce_total = long_build_up_ce_total + parseFloat(value.oi);
							}
							else if(price_change_val < 0 && change_oi_val > 0)
							{
								sbu_obj.style.color="white";
								sbu_obj.style.backgroundColor="red";
								sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
								
								short_build_up_ce_total = short_build_up_ce_total + parseFloat(value.oi);
							}
							else if (price_change_val > 0 && change_oi_val < 0)
							{
								sbu_obj.style.color="black";
								sbu_obj.style.backgroundColor="lightgreen";
								sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
								
								short_covering_ce_total = short_covering_ce_total + parseFloat(value.oi);
							}
							else if (price_change_val < 0 && change_oi_val < 0)
							{
								sbu_obj.style.color="white";
								sbu_obj.style.backgroundColor="red";
								sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
								
								long_liquidition_ce_total = long_liquidition_ce_total + parseFloat(value.oi);
							}
							else
							{
								sbu_obj.style.color="black";
								sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
							}
							
							if (parseInt(value.strike) <= new_enter_strike_price)
							{
								ce_oi_cell = newRow.insertCell();
								ce_oi_cell.style.backgroundColor = "#FDFD96";
								ce_oi_cell.appendChild(document.createTextNode(value.oi));
								
								ce_oi_change = newRow.insertCell();
								ce_oi_change.style.backgroundColor = "#FDFD96";
								ce_oi_change.appendChild(document.createTextNode(value.oi_change));
								
								ce_ltq = newRow.insertCell();
								ce_ltq.style.backgroundColor = "#FDFD96";
								ce_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
								
								ce_price_change = newRow.insertCell();
								ce_price_change.style.backgroundColor = "#FDFD96";
								ce_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
								
								ce_ltp = newRow.insertCell();
								ce_ltp.style.backgroundColor = "#FDFD96";
								ce_ltp.appendChild(document.createTextNode(value.ltp));
								
								ce_iv = newRow.insertCell();
								ce_iv.style.backgroundColor = "#FDFD96";
								ce_iv.appendChild(document.createTextNode('-'));
								
								call_oi_val = value.oi;
								if (parseInt(new_enter_strike_price) == parseInt(value.strike))
								{
									strike_cell_obj = newRow.insertCell();
									strike_cell_obj.style.backgroundColor="#62c1e5";
									strike_cell_obj.appendChild(document.createTextNode(value.strike));
									call_oi_val = value.oi;
									count_row = 1;
								}
								else
								{
									strike_cell_obj = newRow.insertCell();
									strike_cell_obj.style.backgroundColor="#cfecf7";
									strike_cell_obj.appendChild(document.createTextNode(value.strike));
									call_oi_val = value.oi;
									count_row = 1;
								}
							}
							else 
							{
								newRow.insertCell().appendChild(document.createTextNode(value.oi));
								newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
								newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
								newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
								newRow.insertCell().appendChild(document.createTextNode(value.ltp));
								newRow.insertCell().appendChild(document.createTextNode('-'));
								strike_cell_obj = newRow.insertCell();
								strike_cell_obj.style.backgroundColor="#c6e6f5";
								strike_cell_obj.appendChild(document.createTextNode(value.strike));
								call_oi_val = value.oi;
								count_row = 1;
							}
							
							open_call_oi_val = parseFloat(value.oi);
							close_call_oi_val = parseFloat(value.oi);
						}
						else
						{
							total_put_oi = total_put_oi + parseFloat(value.oi);
							total_put_change_oi = total_put_change_oi + parseFloat(value.oi_change);
							
							if (parseInt(value.strike) >= new_enter_strike_price)
							{
								pe_iv = newRow.insertCell();
								pe_iv.style.backgroundColor = "#FDFD96";
								pe_iv.appendChild(document.createTextNode('-'));
								
								pe_ltp = newRow.insertCell();
								pe_ltp.style.backgroundColor = "#FDFD96";
								pe_ltp.appendChild(document.createTextNode(value.ltp));
								
								pe_price_change = newRow.insertCell();
								pe_price_change.style.backgroundColor = "#FDFD96";
								pe_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
								
								pe_ltq = newRow.insertCell();
								pe_ltq.style.backgroundColor = "#FDFD96";
								
								pe_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
								
								pe_oi_change = newRow.insertCell();
								pe_oi_change.style.backgroundColor = "#FDFD96";
								pe_oi_change.appendChild(document.createTextNode(value.oi_change));
								
								pe_oi_cell = newRow.insertCell();
								pe_oi_cell.style.backgroundColor = "#FDFD96";
								pe_oi_cell.appendChild(document.createTextNode(value.oi));
								
								price_change_val = parseFloat(value.price_change);
								change_oi_val = parseFloat(value.oi_change);
								
								sbu_obj = newRow.insertCell();
								
								if (price_change_val > 0 && change_oi_val > 0)
								{
									sbu_obj.style.color="white";
									sbu_obj.style.backgroundColor="red";
									sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
									
									long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
								}
								else if(price_change_val < 0 && change_oi_val > 0)
								{
									sbu_obj.style.color="black";
									sbu_obj.style.backgroundColor="lightgreen";
									sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
									
									short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
								}
								else if (price_change_val > 0 && change_oi_val < 0)
								{
									sbu_obj.style.color="white";
									sbu_obj.style.backgroundColor="red";
									sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
									
									short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi)
								}
								else if (price_change_val < 0 && change_oi_val < 0)
								{
									sbu_obj.style.color="black";
									sbu_obj.style.backgroundColor="lightgreen";
									sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
									
									long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi)
								}
								else
								{
									sbu_obj.style.color="black";
									sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
								}
								
								if (support_resistence_type == 'open')
								{
									if(open_strike_count < 9)
									{
										if (open_value_array[open_strike_count] == value.strike)
										{
											if (support_and_resistence_open_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
											}
											if (open_value_array[open_strike_count] == open_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
											$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
											
											$('#id_pcr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
											
											$('#id_cpr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
											
											open_strike_count = open_strike_count + 1;
										}
									}
								}
								
								if (support_resistence_type == 'close')
								{
									if(close_strike_count < 9)
									{
										if (close_value_array[close_strike_count] == value.strike)
										{
											if (support_and_resistence_close_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
											}
											if (close_value_array[close_strike_count] == close_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
											$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
											
											$('#id_pcr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
											
											$('#id_cpr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
											
											close_strike_count = close_strike_count + 1;
										}
									}
								}
								if (support_resistence_type == 'ltp')
								{
									if(ltp_strike_count < 9)
									{
										if (ltp_value_array[ltp_strike_count] == value.strike)
										{
											if (support_and_resistence_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
											}
											if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
											$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
											
											$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
											
											$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
											
											ltp_strike_count = ltp_strike_count + 1;
										}
									}
								}
								
								
								if (strike_count < 9)
								{
									if (new_array[strike_count] == value.strike)
									{
										if (new_array[strike_count] == new_enter_strike_price)
										{
											pe_pcr = newRow.insertCell()
											pe_pcr.style.backgroundColor = 'yellow';
											pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										}
										net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
										pe_net_change = newRow.insertCell();
										if (net_change_val > 0)
										{
											pe_net_change.style.color = 'green';
											pe_net_change.style.backgroundColor = 'lightgreen';
										}
										else
										{
											pe_net_change.style.color = 'red';
											pe_net_change.style.backgroundColor = '#ffcccb';
										}
										pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
										strike_count = strike_count + 1;
									}
									else
									{
										newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
									}
								}	
								else
								{
									newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
									newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
								}
								
								
								count_row = 0;
							}
							else
							{
								newRow.insertCell().appendChild(document.createTextNode('-'));
								newRow.insertCell().appendChild(document.createTextNode(value.ltp));
								newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
								newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
								newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
								newRow.insertCell().appendChild(document.createTextNode(value.oi));
								
								price_change_val = parseFloat(value.price_change);
								change_oi_val = parseFloat(value.oi_change);
								
								sbu_obj = newRow.insertCell();
								
								if (price_change_val > 0 && change_oi_val > 0)
								{
									sbu_obj.style.color="white";
									sbu_obj.style.backgroundColor="red";
									sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
									
									long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
								}
								else if(price_change_val < 0 && change_oi_val > 0)
								{
									sbu_obj.style.color="black";
									sbu_obj.style.backgroundColor="lightgreen";
									sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
									
									short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
								}
								else if (price_change_val > 0 && change_oi_val < 0)
								{
									sbu_obj.style.color="white";
									sbu_obj.style.backgroundColor="red";
									sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
									
									short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
								}
								else if (price_change_val < 0 && change_oi_val < 0)
								{
									sbu_obj.style.color="black";
									sbu_obj.style.backgroundColor="lightgreen";
									sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
									
									long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
								}
								else
								{
									sbu_obj.style.color="black";
									sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
								}
								
								if (support_resistence_type == 'open')
								{
									if(open_strike_count < 9)
									{
										if (open_value_array[open_strike_count] == value.strike)
										{
											if (support_and_resistence_open_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
											}
											if (open_value_array[open_strike_count] == open_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
											$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
											open_strike_count = open_strike_count + 1;
										}
									}
								}
								
								if (support_resistence_type == 'close')
								{
									if(close_strike_count < 9)
									{
										if (close_value_array[close_strike_count] == value.strike)
										{
											if (support_and_resistence_close_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
											}
											if (close_value_array[close_strike_count] == close_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
											$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
											close_strike_count = close_strike_count + 1;
										}
									}
								}
								
								if (support_resistence_type == 'ltp')
								{
									if(ltp_strike_count < 9)
									{
										if (ltp_value_array[ltp_strike_count] == value.strike)
										{
											if (support_and_resistence_count == 0)
											{
												get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
											}
											if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
											{
												$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
												<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
											}
											else
											{
												$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
											}
											$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
											$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
											
											$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
											
											$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
											
											ltp_strike_count = ltp_strike_count + 1;
										}
									}
								}
								
								if (strike_count < 9)
								{
									if (new_array[strike_count] == value.strike)
									{
										if (new_array[strike_count] == new_enter_strike_price)
										{
											pe_pcr = newRow.insertCell()
											pe_pcr.style.backgroundColor = 'yellow';
											pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										}
										net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
										pe_net_change = newRow.insertCell();
										if (net_change_val > 0)
										{
											pe_net_change.style.color = 'green';
											pe_net_change.style.backgroundColor = 'lightgreen';
										}
										else
										{
											pe_net_change.style.color = 'red';
											pe_net_change.style.backgroundColor = '#ffcccb';
										}
										pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
										strike_count = strike_count + 1;
									}
									else
									{
										newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
										newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
									}
								}	
								else
								{
									newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
									newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
								}
							
								count_row = 0;
							}
						}
					});
					support_and_resistence_count = 1;
					support_and_resistence_open_count = 1;
					support_and_resistence_close_count = 1;
					<!-- sentiments table calculations  -->
						$('#id_ll_call').html(indianRupee(long_liquidition_ce_total));
						$('#id_ll_put').html(indianRupee(long_liquidition_pe_total));
						
						$('#id_sbu_call').html(indianRupee(short_build_up_ce_total));
						$('#id_sbu_put').html(indianRupee(short_build_up_pe_total));
						
						$('#id_sv_call').html(indianRupee(short_covering_ce_total));
						$('#id_sv_put').html(indianRupee(short_covering_pe_total));
						
						$('#id_lbu_call').html(indianRupee(long_build_up_ce_total));
						$('#id_lbu_put').html(indianRupee(long_build_up_pe_total));
						
						var bullish_sum = (long_liquidition_ce_total) + (short_build_up_ce_total) + (short_covering_pe_total) + (long_build_up_pe_total)
						var bearish_sum = (long_liquidition_pe_total) + (short_build_up_pe_total) + (short_covering_ce_total) + (long_build_up_ce_total)
						
						var total_bullish_bearish = parseFloat(bullish_sum) + parseFloat(bearish_sum);
						var ce_percentage = ((parseFloat(bullish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
						var pe_percentage = ((parseFloat(bearish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
						
						create_sentiment_graph(ce_percentage, pe_percentage);
						
						$('#id_bullish_total').html(indianRupee(bullish_sum));
						$('#id_bearish_total').html(indianRupee(bearish_sum));
						
						var sentiment_percentage = ((parseFloat(bullish_sum) - parseFloat(bearish_sum))/parseFloat(bearish_sum)).toFixed(2);
						if (sentiment_percentage > 0)
						{
							$('#id_sentiment_percentage').css('background-color','lightgreen');
							$('#id_sentiment_percentage').css('color','green');
						}
						else
						{
							$('#id_sentiment_percentage').css('background-color','#ffcccb');
							$('#id_sentiment_percentage').css('color','red');
						}
						$('#id_sentiment_percentage').html(sentiment_percentage + "%");
					<!-- end sentiments table calculations  -->
					
					var max = {
						first: 0,
						second: 0,
						
						first1: 0,
						second1: 0,
						
						first2: 0,
						second2: 0,
						
						first3: 0,
						second3: 0,
					};
					<!-- CE OI two greatest element -->
					$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
						var current = parseInt(elem.innerHTML);
						if(max.first<current)
						{
							max.second = max.first;
							max.first = current;
						}
						else if(max.second<current)
						{
							max.second = current;
						}
					});
					$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
						if (max.first == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						if (max.second == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						elem.innerHTML = indianRupee(elem.innerHTML);
					});
					
					<!-- CE Change OI two greatest element -->
					
					$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
						var current = parseInt(elem.innerHTML);
						if(max.first1<current)
						{
							max.second1 = max.first1;
							max.first1 = current;
						}
						else if(max.second1<current)
						{
							max.second1 = current;
						}
					});
					$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
						if (max.first1 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						if (max.second1 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						elem.innerHTML = indianRupee(elem.innerHTML);
					});
					
					<!-- PE OI two greatest element -->
					
					$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
						var current = parseInt(elem.innerHTML);
						if(max.first2<current)
						{
							max.second2 = max.first2;
							max.first2 = current;
						}
						else if(max.second2<current)
						{
							max.second2 = current;
						}
					});
					$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
						if (max.first2 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						if (max.second2 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						elem.innerHTML = indianRupee(elem.innerHTML);
					});
					
					<!-- PE Change OI two greatest element -->
					
					$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
						var current = parseInt(elem.innerHTML);
						if(max.first3<current)
						{
							max.second3 = max.first3;
							max.first3 = current;
						}
						else if(max.second3<current)
						{
							max.second3 = current;
						}
					});
					$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
						if (max.first3 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						if (max.second3 == elem.innerHTML)
						{
							elem.style.backgroundColor = "skyblue";
						}
						elem.innerHTML = indianRupee(elem.innerHTML);
					});
					
					<!-- end calculation of two greatest -->

					newRow = tbodyRef.insertRow();
					
					intraday = newRow.insertCell();
					intraday.style.backgroundColor = 'lightblue';
					intraday.appendChild(document.createTextNode('INTRADAY'));
					
					ce_total_oi = newRow.insertCell();
					ce_total_oi.style.color = "red";
					ce_total_oi.appendChild(document.createTextNode(indianRupee(total_call_oi)));
					
					ce_total_call_oi = newRow.insertCell();
					ce_total_call_oi.style.color = "red";
					ce_total_call_oi.appendChild(document.createTextNode(indianRupee(total_call_change_oi)));
					
					if (total_put_change_oi > total_call_change_oi)
					{
						bull_bear = newRow.insertCell();
						bull_bear.style.color = "green";
						bull_bear.style.backgroundColor = "lightgreen";
						bull_bear.style.fontSize = "18px";
						bull_bear.colSpan = "2";
						bull_bear.appendChild(document.createTextNode('BULLISH'));
					}
					else
					{
						bull_bear = newRow.insertCell();
						bull_bear.style.color = "red";
						bull_bear.style.backgroundColor = "#ffcccb";
						bull_bear.colSpan = "2";
						bull_bear.style.fontSize = "18px";
						bull_bear.appendChild(document.createTextNode('BEARISH'));
					}
					
					<!-- newRow.insertCell().colSpan = "5"; -->
					market_view = newRow.insertCell();
					market_view.style.color = "green";
					market_view.style.backgroundColor = "lightblue";
					market_view.colSpan = "5";
					market_view.style.fontSize = "18px";
					market_view.appendChild(document.createTextNode('MARKET VIEW'));
					
					if (total_put_oi > total_call_oi)
					{
						bull_bear = newRow.insertCell();
						bull_bear.style.color = "green";
						bull_bear.style.backgroundColor = "lightgreen";
						bull_bear.colSpan = "2";
						bull_bear.style.fontSize = "18px";
						bull_bear.appendChild(document.createTextNode('BULLISH'));
					}
					else
					{
						bull_bear = newRow.insertCell();
						bull_bear.style.color = "red";
						bull_bear.style.backgroundColor = "#ffcccb";
						bull_bear.colSpan = "2";
						bull_bear.style.fontSize = "18px";
						bull_bear.appendChild(document.createTextNode('BEARISH'));
					}
					
					
					pe_total_oi = newRow.insertCell();
					pe_total_oi.style.color = "red";
					pe_total_oi.appendChild(document.createTextNode(indianRupee(total_put_change_oi)));
					
					pe_total_call_oi = newRow.insertCell();
					pe_total_call_oi.style.color = "red";
					pe_total_call_oi.appendChild(document.createTextNode(indianRupee(total_put_oi)));
					
					
					weekday = newRow.insertCell();
					weekday.style.backgroundColor = 'yellow';
					weekday.colSpan = "1";
					weekday.appendChild(document.createTextNode('WEEKLY'));
				}
			}
		}
	}

	createApp(CoinsApp).mount('#app');

	<!-- CHAIN TYPE SELECT CHANGE -->
	function chain_type()
	{
		change_support_resistence_support();
		
		$('#hideloader').show();
		$("#tbodyid").empty();
		$('#id_date_error').hide();
		if (document.getElementById('testing').value == 1)
		{
			if (socket != null)
			{
				socket.close();
			}
			let { createApp } = Vue;

			let CoinsApp = {
				data(){
					return {
						coin: 'Just a text',
						text: null,
					}
				},
				created(){
					let chain_type = $('#testing :selected').text();
					let exp_date = $.trim($('#id_expiry_date_select :selected').text());


					socket = new WebSocket(`ws://${window.location.host}/ws/optionchain/${chain_type}/${exp_date}/`);

					let _this = this;
					
					
					var ltp_value_array = new Array();
					var open_value_array = new Array();
					var close_value_array = new Array();
					socket.onmessage = function(event)
					{
						$('#hideloader').hide();
						_this.test = JSON.parse(event.data);
						
						if (_this.test['option_chain'] == 'Error')
						{
							console.log('Date Exceeds');
							$('#id_date_error').show();
						}
						else
						{
							if (_this.test['live_data'] == 'none')
							{
								
							}
							else
							{
								_this.live_dict = JSON.parse(_this.test['live_data']);
								
								if (_this.live_dict['symbol'] == 'NIFTY 50')
								{
									$('#id_nifty_open').val(_this.live_dict['day_open']);
									$('#id_nifty_close').val(_this.live_dict['prev_day_close']);
									
									$('#id_ltp_price').html(_this.live_dict['ltp']);
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_ltp_price').css('color', 'green');
									}
									
									$('#id_nifty_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_nifty_change').html((_this.live_dict['change_perc']).toFixed(2));
								}
								else if(_this.live_dict['symbol'] == 'NIFTY BANK')
								{
									$('#id_bank_nifty_open').val(_this.live_dict['day_open']);
									$('#id_bank_nifty_close').val(_this.live_dict['prev_day_close']);
									
									$('#id_bnf_ltp_price').html(_this.live_dict['ltp']);
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_bnf_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_bnf_ltp_price').css('color', 'green');
									}

									
									$('#id_bnf_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_bnf_change').html((_this.live_dict['change_perc']).toFixed(2));
								}
								
								$('#id_date_error').hide();
								<!-- console.log(JSON.parse(_this.test['option_chain'])); -->
								
								_this.option_data = JSON.parse(_this.test['option_chain']);
								
								var tbodyRef = document.getElementById('option_analysis_table').getElementsByTagName('tbody')[0];
										
								$("#tbodyid").empty();
								
								var count_row = 0;
								
								var call_oi_val = 0;
								
								var support_resistence_type = $('#id_support_resistence_select').val();
								var open_new_strike_price = null;
								var close_new_strike_price = null;
								var open_call_oi_val = null;
								var close_call_oi_val = null;
								
								if (support_resistence_type == 'open')
								{
									if (support_and_resistence_open_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_nifty_open').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										open_value_array = arr_low.concat(arr_high);
										open_new_strike_price = new_enter_strike_price;
									}
								}
								else if (support_resistence_type == 'close')
								{
									if (support_and_resistence_close_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_nifty_close').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										close_value_array = arr_low.concat(arr_high)
										
										close_new_strike_price = new_enter_strike_price;
									}
								}
								if (support_and_resistence_count == 0)
								{
									<!-- ltp_value_array = new_array; -->
									<!-- ltp_new_strike_price = new_enter_strike_price; -->
									
									var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
									last2 = enter_strike_price.slice(-2);
									var diff = 0;
									var new_enter_strike_price = 0.0;
									if(last2 >= 90)
									{
										diff = 100 - parseInt(last2); 
										new_enter_strike_price = parseInt(enter_strike_price) + diff;
									}
									else if(last2 < 90)
									{
										new_enter_strike_price = enter_strike_price - last2;
									}
									else
									{
										new_enter_strike_price = enter_strike_price;
									}
									<!-- console.log(new_enter_strike_price); -->
									var arr_low = new Array();
									var arr_high = new Array();
									var array_high_val = 0;
									var array_low_val = 0;
									
									var count_temp = 100;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 100;
									}
									arr_low.reverse();
									ltp_value_array = arr_low.concat(arr_high)
									
									ltp_new_strike_price = new_enter_strike_price;
								}
								
								var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
								last2 = enter_strike_price.slice(-2);
								var diff = 0;
								var new_enter_strike_price = 0.0;
								if(last2 >= 90)
								{
									diff = 100 - parseInt(last2); 
									new_enter_strike_price = parseInt(enter_strike_price) + diff;
								}
								else if(last2 < 90)
								{
									new_enter_strike_price = enter_strike_price - last2;
								}
								else
								{
									new_enter_strike_price = enter_strike_price;
								}
								
								var arr_low = new Array();
								var arr_high = new Array();
								var array_high_val = 0;
								var array_low_val = 0;
								
								var count_temp = 50;
								arr_low.push(parseInt(new_enter_strike_price));
								for(var i = 0; i<4; i++)
								{
									arr_low.push(parseInt(new_enter_strike_price) - count_temp);
									arr_high.push(parseInt(new_enter_strike_price) + count_temp);
									
									count_temp = count_temp + 50;
								}
								arr_low.reverse();
								var new_array = arr_low.concat(arr_high)
								
								<!-- if (support_and_resistence_count == 0) -->
								<!-- { -->
									<!-- ltp_value_array = new_array; -->
									<!-- ltp_new_strike_price = new_enter_strike_price; -->
								<!-- } -->
								
								var strike_count = 0;
								var open_strike_count = 0;
								var close_strike_count = 0;
								var ltp_strike_count = 0;
								
								var total_call_oi = 0;
								var total_call_change_oi = 0;
								var total_put_oi = 0;
								var total_put_change_oi = 0;
								
								var long_liquidition_ce_total = 0;
								var short_build_up_ce_total = 0;
								var short_covering_ce_total = 0;
								var long_build_up_ce_total = 0;
								
								var long_liquidition_pe_total = 0;
								var short_build_up_pe_total = 0;
								var short_covering_pe_total = 0;
								var long_build_up_pe_total = 0;
								
								_this.option_data.forEach(function(value) 
								{
									if (count_row == 0)
									{
										newRow = tbodyRef.insertRow();
									}
									if (value.type == "CE")
									{
										total_call_oi = total_call_oi + parseFloat(value.oi);
										total_call_change_oi = total_call_change_oi + parseFloat(value.oi_change);
										price_change_val = parseFloat(value.price_change);
										change_oi_val = parseFloat(value.oi_change);
										
										sbu_obj = newRow.insertCell();
										
										if (price_change_val > 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
											
											long_build_up_ce_total = long_build_up_ce_total + parseFloat(value.oi);
										}
										else if(price_change_val < 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
											
											short_build_up_ce_total = short_build_up_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val > 0 && change_oi_val < 0)
										{
											
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
											
											short_covering_ce_total = short_covering_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val < 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
											
											long_liquidition_ce_total = long_liquidition_ce_total + parseFloat(value.oi);
										}
										else
										{
											sbu_obj.style.color="black";
											sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
										}
										
										if (parseInt(value.strike) <= new_enter_strike_price)
										{
											ce_oi_cell = newRow.insertCell();
											ce_oi_cell.style.backgroundColor = "#FDFD96";
											ce_oi_cell.appendChild(document.createTextNode(value.oi));
											
											ce_oi_change = newRow.insertCell();
											ce_oi_change.style.backgroundColor = "#FDFD96";
											ce_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											ce_ltq = newRow.insertCell();
											ce_ltq.style.backgroundColor = "#FDFD96";
											ce_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											ce_price_change = newRow.insertCell();
											ce_price_change.style.backgroundColor = "#FDFD96";
											ce_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											ce_ltp = newRow.insertCell();
											ce_ltp.style.backgroundColor = "#FDFD96";
											ce_ltp.appendChild(document.createTextNode(value.ltp));
											
											ce_iv = newRow.insertCell();
											ce_iv.style.backgroundColor = "#FDFD96";
											ce_iv.appendChild(document.createTextNode('-'));
											
											call_oi_val = value.oi;
											if (parseInt(new_enter_strike_price) == parseInt(value.strike))
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#62c1e5";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
											else
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#cfecf7";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode('-'));
											strike_cell_obj = newRow.insertCell();
											strike_cell_obj.style.backgroundColor="#c6e6f5";
											strike_cell_obj.appendChild(document.createTextNode(value.strike));
											call_oi_val = value.oi;
											count_row = 1;
										}
										open_call_oi_val = parseFloat(value.oi);
										close_call_oi_val = parseFloat(value.oi);
									}
									else
									{
										total_put_oi = total_put_oi + parseFloat(value.oi);
										total_put_change_oi = total_put_change_oi + parseFloat(value.oi_change);
										if (parseInt(value.strike) >= new_enter_strike_price)
										{
											pe_iv = newRow.insertCell();
											pe_iv.style.backgroundColor = "#FDFD96";
											pe_iv.appendChild(document.createTextNode('-'));
											
											pe_ltp = newRow.insertCell();
											pe_ltp.style.backgroundColor = "#FDFD96";
											pe_ltp.appendChild(document.createTextNode(value.ltp));
											
											pe_price_change = newRow.insertCell();
											pe_price_change.style.backgroundColor = "#FDFD96";
											pe_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											pe_ltq = newRow.insertCell();
											pe_ltq.style.backgroundColor = "#FDFD96";
											
											pe_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											pe_oi_change = newRow.insertCell();
											pe_oi_change.style.backgroundColor = "#FDFD96";
											pe_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											pe_oi_cell = newRow.insertCell();
											pe_oi_cell.style.backgroundColor = "#FDFD96";
											pe_oi_cell.appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total  = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											
											
											count_row = 0;
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode('-'));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total  = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";												
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											
											count_row = 0;
										}
									}
								});
								support_and_resistence_count = 1;
								support_and_resistence_open_count = 1;
								support_and_resistence_close_count = 1;
								<!-- sentiments table calculations  -->
								
									$('#id_ll_call').html(indianRupee(long_liquidition_ce_total));
									$('#id_ll_put').html(indianRupee(long_liquidition_pe_total));
									
									$('#id_sbu_call').html(indianRupee(short_build_up_ce_total));
									$('#id_sbu_put').html(indianRupee(short_build_up_pe_total));
									
									$('#id_sv_call').html(indianRupee(short_covering_ce_total));
									$('#id_sv_put').html(indianRupee(short_covering_pe_total));
									
									$('#id_lbu_call').html(indianRupee(long_build_up_ce_total));
									$('#id_lbu_put').html(indianRupee(long_build_up_pe_total));
									
									var bullish_sum = (long_liquidition_ce_total) + (short_build_up_ce_total) + (short_covering_pe_total) + (long_build_up_pe_total)
									var bearish_sum = (long_liquidition_pe_total) + (short_build_up_pe_total) + (short_covering_ce_total) + (long_build_up_ce_total)
									
									var total_bullish_bearish = parseFloat(bullish_sum) + parseFloat(bearish_sum);
									var ce_percentage = ((parseFloat(bullish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									var pe_percentage = ((parseFloat(bearish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									
									create_sentiment_graph(ce_percentage, pe_percentage);
									
									$('#id_bullish_total').html(indianRupee(bullish_sum));
									$('#id_bearish_total').html(indianRupee(bearish_sum));
									
									var sentiment_percentage = ((parseFloat(bullish_sum) - parseFloat(bearish_sum))/parseFloat(bearish_sum)).toFixed(2);
									if (sentiment_percentage > 0)
									{
										$('#id_sentiment_percentage').css('background-color','lightgreen');
										$('#id_sentiment_percentage').css('color','green');
									}
									else
									{
										$('#id_sentiment_percentage').css('background-color','#ffcccb');
										$('#id_sentiment_percentage').css('color','red');
									}
									$('#id_sentiment_percentage').html(sentiment_percentage + "%");
								
								<!-- end sentiments table calculations  -->
								
								<!-- calculation of two greatest -->
									var max = {
										first: 0,
										second: 0,
										
										first1: 0,
										second1: 0,
										
										first2: 0,
										second2: 0,
										
										first3: 0,
										second3: 0,
									};
									<!-- CE OI two greatest element -->
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first<current)
										{
											max.second = max.first;
											max.first = current;
										}
										else if(max.second<current)
										{
											max.second = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										if (max.first == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- CE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first1<current)
										{
											max.second1 = max.first1;
											max.first1 = current;
										}
										else if(max.second1<current)
										{
											max.second1 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										if (max.first1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first2<current)
										{
											max.second2 = max.first2;
											max.first2 = current;
										}
										else if(max.second2<current)
										{
											max.second2 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										if (max.first2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first3<current)
										{
											max.second3 = max.first3;
											max.first3 = current;
										}
										else if(max.second3<current)
										{
											max.second3 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										if (max.first3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- end calculation of two greatest -->
								
								newRow= tbodyRef.insertRow();
								
								intraday = newRow.insertCell();
								intraday.style.backgroundColor = 'lightblue';
								intraday.appendChild(document.createTextNode('INTRADAY'));
								
								ce_total_oi = newRow.insertCell();
								ce_total_oi.style.color = "red";
								ce_total_oi.appendChild(document.createTextNode(indianRupee(total_call_oi)));
								
								ce_total_call_oi = newRow.insertCell();
								ce_total_call_oi.style.color = "red";
								ce_total_call_oi.appendChild(document.createTextNode(indianRupee(total_call_change_oi)));
								
								if (total_put_change_oi > total_call_change_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.style.fontSize = "18px";
									bull_bear.colSpan = "2";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								<!-- newRow.insertCell().colSpan = "5"; -->
								
								market_view = newRow.insertCell();
								market_view.style.color = "green";
								market_view.style.backgroundColor = "lightblue";
								market_view.colSpan = "5";
								market_view.style.fontSize = "18px";
								market_view.appendChild(document.createTextNode('MARKET VIEW'));
								
								if (total_put_oi > total_call_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								
								pe_total_oi = newRow.insertCell();
								pe_total_oi.style.color = "red";
								pe_total_oi.appendChild(document.createTextNode(indianRupee(total_put_change_oi)));
								
								pe_total_call_oi = newRow.insertCell();
								pe_total_call_oi.style.color = "red";
								pe_total_call_oi.appendChild(document.createTextNode(indianRupee(total_put_oi)));
								
								
								weekday = newRow.insertCell();
								weekday.style.backgroundColor = 'yellow';
								weekday.colSpan = "1";
								weekday.appendChild(document.createTextNode('WEEKLY'));
							}
						}
					}
				}
			}

			createApp(CoinsApp).mount('#app');
		
		}
		else
		{
			if (socket != null)
			{
				socket.close();
			}
			let { createApp } = Vue;

			let CoinsApp = {
				data(){
					return {
						coin: 'Just a text',
						text: null,
					}
				},
				created(){
					let chain_type = $('#testing :selected').text();
					let exp_date = $.trim($('#id_expiry_date_select :selected').text());


					socket = new WebSocket(`ws://${window.location.host}/ws/optionchain/${chain_type}/${exp_date}/`);

					let _this = this;
					
					var ltp_value_array = new Array();
					var open_value_array = new Array();
					var close_value_array = new Array();

					socket.onmessage = function(event)
					{
						$('#hideloader').hide();
						_this.test = JSON.parse(event.data);
						
						if (_this.test['option_chain'] == 'Error')
						{
							console.log('Date Exceeds');
							$('#id_date_error').show();
						}
						else
						{
							if (_this.test['live_data'] == 'none')
							{
								
							}
							else
							{
								_this.live_dict = JSON.parse(_this.test['live_data']);
					
								if (_this.live_dict['symbol'] == 'NIFTY 50')
								{
									$('#id_ltp_price').html(_this.live_dict['ltp']);
									
									$('#id_nifty_open').html(_this.live_dict['day_open']);
									$('#id_nifty_close').html(_this.live_dict['prev_day_close']);
									
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_ltp_price').css('color', 'green');
									}
									
									$('#id_nifty_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_nifty_change').html((_this.live_dict['change_perc']).toFixed(2));
								}
								else if(_this.live_dict['symbol'] == 'NIFTY BANK')
								{
									$('#id_bank_nifty_open').html(_this.live_dict['day_open']);
									$('#id_bank_nifty_close').html(_this.live_dict['prev_day_close']);
									
									$('#id_bnf_ltp_price').html(_this.live_dict['ltp']);
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_bnf_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_bnf_ltp_price').css('color', 'green');
									}
									
									$('#id_bnf_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_bnf_change').html((_this.live_dict['change_perc']).toFixed(2));
								}

								
								$('#id_date_error').hide();
								
								_this.option_data = JSON.parse(_this.test['option_chain']);
								
								var tbodyRef = document.getElementById('option_analysis_table').getElementsByTagName('tbody')[0];
										
								$("#tbodyid").empty();
								
								var count_row = 0;
								
								var call_oi_val = 0;
								
								var support_resistence_type = $('#id_support_resistence_select').val();
								var open_new_strike_price = null;
								var close_new_strike_price = null;
								var open_call_oi_val = null;
								var close_call_oi_val = null;
								
								if (support_resistence_type == 'open')
								{
									if (support_and_resistence_open_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_bank_nifty_open').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										open_value_array = arr_low.concat(arr_high);
										open_new_strike_price = new_enter_strike_price;
									}
								}
								else if (support_resistence_type == 'close')
								{
									if (support_and_resistence_close_count == 0)
									{
										console.log($('#id_nifty_close').val());
										var enter_strike_price = Math.round(parseFloat($('#id_bank_nifty_close').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										close_value_array = arr_low.concat(arr_high)
										
										close_new_strike_price = new_enter_strike_price;
									}
								}
					
								var enter_strike_price = Math.round(parseFloat($('#id_bnf_ltp_price').html())).toString();
								last2 = enter_strike_price.slice(-2);
								var diff = 0;
								var new_enter_strike_price = 0.0;
								if(last2 >= 90)
								{
									diff = 100 - parseInt(last2); 
									new_enter_strike_price = parseInt(enter_strike_price) + diff;
								}
								else if(last2 < 90)
								{
									new_enter_strike_price = enter_strike_price - last2;
								}
								else
								{
									new_enter_strike_price = enter_strike_price;
								}
								
								var arr_low = new Array();
								var arr_high = new Array();
								var array_high_val = 0;
								var array_low_val = 0;
								
								var count_temp = 100;
								arr_low.push(parseInt(new_enter_strike_price));
								for(var i = 0; i<4; i++)
								{
									arr_low.push(parseInt(new_enter_strike_price) - count_temp);
									arr_high.push(parseInt(new_enter_strike_price) + count_temp);
									
									count_temp = count_temp + 100;
								}
								arr_low.reverse();
								var new_array = arr_low.concat(arr_high)
								
								if (support_and_resistence_count == 0)
								{
									ltp_value_array = new_array;
									ltp_new_strike_price = new_enter_strike_price;
								}
								
								var strike_count = 0;
								var open_strike_count = 0;
								var close_strike_count = 0;
								var ltp_strike_count = 0;
								
								var total_call_oi = 0;
								var total_call_change_oi = 0;
								var total_put_oi = 0;
								var total_put_change_oi = 0;
								
								var long_liquidition_ce_total = 0;
								var short_build_up_ce_total = 0;
								var short_covering_ce_total = 0;
								var long_build_up_ce_total = 0;
								
								var long_liquidition_pe_total = 0;
								var short_build_up_pe_total = 0;
								var short_covering_pe_total = 0;
								var long_build_up_pe_total = 0;

								
								_this.option_data.forEach(function(value) 
								{
									if (count_row == 0)
									{
										newRow = tbodyRef.insertRow();
									}
									if (value.type == "CE")
									{
										total_call_oi = total_call_oi + parseFloat(value.oi);
										total_call_change_oi = total_call_change_oi + parseFloat(value.oi_change);
										price_change_val = parseFloat(value.price_change);
										change_oi_val = parseFloat(value.oi_change);
										
										sbu_obj = newRow.insertCell();
										
										if (price_change_val > 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
											
											long_build_up_ce_total = long_build_up_ce_total + parseFloat(value.oi)
										}
										else if(price_change_val < 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
											
											short_build_up_ce_total = short_build_up_ce_total + parseFloat(value.oi)
										}
										else if (price_change_val > 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
											
											short_covering_ce_total = short_covering_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val < 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
											
											long_liquidition_ce_total = long_liquidition_ce_total + parseFloat(value.oi) 
										}
										else
										{ 
											sbu_obj.style.color="black";
											sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
										}
										if (parseInt(value.strike) <= new_enter_strike_price)
										{
											ce_oi_cell = newRow.insertCell();
											ce_oi_cell.style.backgroundColor = "#FDFD96";
											ce_oi_cell.appendChild(document.createTextNode(value.oi));
											
											ce_oi_change = newRow.insertCell();
											ce_oi_change.style.backgroundColor = "#FDFD96";
											ce_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											ce_ltq = newRow.insertCell();
											ce_ltq.style.backgroundColor = "#FDFD96";
											ce_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											ce_price_change = newRow.insertCell();
											ce_price_change.style.backgroundColor = "#FDFD96";
											ce_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											ce_ltp = newRow.insertCell();
											ce_ltp.style.backgroundColor = "#FDFD96";
											ce_ltp.appendChild(document.createTextNode(value.ltp));
											
											ce_iv = newRow.insertCell();
											ce_iv.style.backgroundColor = "#FDFD96";
											ce_iv.appendChild(document.createTextNode('-'));
											
											call_oi_val = value.oi;
											if (parseInt(new_enter_strike_price) == parseInt(value.strike))
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#62c1e5";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
											else
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#cfecf7";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode('-'));
											strike_cell_obj = newRow.insertCell();
											strike_cell_obj.style.backgroundColor="#c6e6f5";
											strike_cell_obj.appendChild(document.createTextNode(value.strike));
											call_oi_val = value.oi;
											count_row = 1;
										}
										open_call_oi_val = parseFloat(value.oi);
										close_call_oi_val = parseFloat(value.oi);
									}
									else
									{
										total_put_oi = total_put_oi + parseFloat(value.oi);
										total_put_change_oi = total_put_change_oi + parseFloat(value.oi_change);
										
										if (parseInt(value.strike) >= new_enter_strike_price)
										{
											pe_iv = newRow.insertCell();
											pe_iv.style.backgroundColor = "#FDFD96";
											pe_iv.appendChild(document.createTextNode('-'));
											
											pe_ltp = newRow.insertCell();
											pe_ltp.style.backgroundColor = "#FDFD96";
											pe_ltp.appendChild(document.createTextNode(value.ltp));
											
											pe_price_change = newRow.insertCell();
											pe_price_change.style.backgroundColor = "#FDFD96";
											pe_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											pe_ltq = newRow.insertCell();
											pe_ltq.style.backgroundColor = "#FDFD96";
											
											pe_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											pe_oi_change = newRow.insertCell();
											pe_oi_change.style.backgroundColor = "#FDFD96";
											pe_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											pe_oi_cell = newRow.insertCell();
											pe_oi_cell.style.backgroundColor = "#FDFD96";
											pe_oi_cell.appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													<!-- console.log(new_array[strike_count]); -->
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											count_row = 0;
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode('-'));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											

											count_row = 0;
										}
									}
								});
								support_and_resistence_count = 1;
								support_and_resistence_open_count = 1;
								support_and_resistence_close_count = 1;

								<!-- sentiments table calculations  -->
								
									$('#id_ll_call').html(indianRupee(long_liquidition_ce_total));
									$('#id_ll_put').html(indianRupee(long_liquidition_pe_total));
									
									$('#id_sbu_call').html(indianRupee(short_build_up_ce_total));
									$('#id_sbu_put').html(indianRupee(short_build_up_pe_total));
									
									$('#id_sv_call').html(indianRupee(short_covering_ce_total));
									$('#id_sv_put').html(indianRupee(short_covering_pe_total));
									
									$('#id_lbu_call').html(indianRupee(long_build_up_ce_total));
									$('#id_lbu_put').html(indianRupee(long_build_up_pe_total));
									
									var bullish_sum = (long_liquidition_ce_total) + (short_build_up_ce_total) + (short_covering_pe_total) + (long_build_up_pe_total)
									var bearish_sum = (long_liquidition_pe_total) + (short_build_up_pe_total) + (short_covering_ce_total) + (long_build_up_ce_total)
									
									var total_bullish_bearish = parseFloat(bullish_sum) + parseFloat(bearish_sum);
									var ce_percentage = ((parseFloat(bullish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									var pe_percentage = ((parseFloat(bearish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									
									create_sentiment_graph(ce_percentage, pe_percentage);
									
									$('#id_bullish_total').html(indianRupee(bullish_sum));
									$('#id_bearish_total').html(indianRupee(bearish_sum));
									
									var sentiment_percentage = ((parseFloat(bullish_sum) - parseFloat(bearish_sum))/parseFloat(bearish_sum)).toFixed(2);
									if (sentiment_percentage > 0)
									{
										$('#id_sentiment_percentage').css('background-color','lightgreen');
										$('#id_sentiment_percentage').css('color','green');
									}
									else
									{
										$('#id_sentiment_percentage').css('background-color','#ffcccb');
										$('#id_sentiment_percentage').css('color','red');
									}
									$('#id_sentiment_percentage').html(sentiment_percentage + "%");

								
								<!-- end sentiments table calculations  -->
								
								<!-- calculation of two greatest -->
									var max = {
										first: 0,
										second: 0,
										
										first1: 0,
										second1: 0,
										
										first2: 0,
										second2: 0,
										
										first3: 0,
										second3: 0,
									};
									<!-- CE OI two greatest element -->
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first<current)
										{
											max.second = max.first;
											max.first = current;
										}
										else if(max.second<current)
										{
											max.second = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										if (max.first == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- CE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first1<current)
										{
											max.second1 = max.first1;
											max.first1 = current;
										}
										else if(max.second1<current)
										{
											max.second1 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										if (max.first1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first2<current)
										{
											max.second2 = max.first2;
											max.first2 = current;
										}
										else if(max.second2<current)
										{
											max.second2 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										if (max.first2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first3<current)
										{
											max.second3 = max.first3;
											max.first3 = current;
										}
										else if(max.second3<current)
										{
											max.second3 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										if (max.first3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
								<!-- end calculation of two greatest -->

								
								newRow= tbodyRef.insertRow();
								
								intraday = newRow.insertCell();
								intraday.style.backgroundColor = 'lightblue';
								intraday.appendChild(document.createTextNode('INTRADAY'));
								
								ce_total_oi = newRow.insertCell();
								ce_total_oi.style.color = "red";
								ce_total_oi.appendChild(document.createTextNode(indianRupee(total_call_oi)));
								
								ce_total_call_oi = newRow.insertCell();
								ce_total_call_oi.style.color = "red";
								ce_total_call_oi.appendChild(document.createTextNode(indianRupee(total_call_change_oi)));
								
								if (total_put_change_oi > total_call_change_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.style.fontSize = "18px";
									bull_bear.colSpan = "2";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								market_view = newRow.insertCell();
								market_view.style.color = "green";
								market_view.style.backgroundColor = "lightblue";
								market_view.colSpan = "5";
								market_view.style.fontSize = "18px";
								market_view.appendChild(document.createTextNode('MARKET VIEW'));
								
								if (total_put_oi > total_call_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								
								pe_total_oi = newRow.insertCell();
								pe_total_oi.style.color = "red";
								pe_total_oi.appendChild(document.createTextNode(indianRupee(total_put_change_oi)));
								
								pe_total_call_oi = newRow.insertCell();
								pe_total_call_oi.style.color = "red";
								pe_total_call_oi.appendChild(document.createTextNode(indianRupee(total_put_oi)));
								
								
								weekday = newRow.insertCell();
								weekday.style.backgroundColor = 'yellow';
								weekday.colSpan = "1";
								weekday.appendChild(document.createTextNode('WEEKLY'));

							}
						}
					}
				}
			}

			createApp(CoinsApp).mount('#app');
		}
	}
	<!-- END CHAIN TYPE SELECT CHANGE -->
	
	<!-- EXPIRY DATE SELECT CHANGE -->
	function exp_date()
	{
		change_support_resistence_support();
		
		$('#id_date_error').hide();
		$('#hideloader').show();
		$("#tbodyid").empty();
		if (document.getElementById('testing').value == 1)
		{
			if (socket != null)
			{
				socket.close();
			}
			let { createApp } = Vue;

			let CoinsApp = {
				data(){
					return {
						coin: 'Just a text',
						text: null,
					}
				},
				created(){
					let chain_type = $('#testing :selected').text();
					let exp_date = $.trim($('#id_expiry_date_select :selected').text());


					socket = new WebSocket(`ws://${window.location.host}/ws/optionchain/${chain_type}/${exp_date}/`);

					let _this = this;

					var ltp_value_array = new Array();
					var open_value_array = new Array();
					var close_value_array = new Array();

					socket.onmessage = function(event)
					{
						$('#hideloader').hide();
						_this.test = JSON.parse(event.data);
						
						if (_this.test['option_chain'] == 'Error')
						{
							console.log('Date Exceeds');
							$('#id_date_error').show();
						}
						else
						{
							if (_this.test['live_data'] == 'none')
							{
								
							}
							else
							{
								_this.live_dict = JSON.parse(_this.test['live_data']);
					
								if (_this.live_dict['symbol'] == 'NIFTY 50')
								{
									$('#id_nifty_open').html(_this.live_dict['day_open']);
									$('#id_nifty_close').html(_this.live_dict['prev_day_close']);
									
									$('#id_ltp_price').html(_this.live_dict['ltp']);
									
									$('#id_nifty_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_nifty_change').html((_this.live_dict['change_perc']).toFixed(2));
								}
								else if(_this.live_dict['symbol'] == 'NIFTY BANK')
								{
									$('#id_bank_nifty_open').html(_this.live_dict['day_open']);
									$('#id_bank_nifty_close').html(_this.live_dict['prev_day_close']);
									
									$('#id_bnf_ltp_price').html(_this.live_dict['ltp']);
									
									$('#id_bnf_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_bnf_change').html((_this.live_dict['change_perc']).toFixed(2));
								}

								
								$('#id_date_error').hide();
								<!-- console.log(JSON.parse(_this.test['option_chain'])); -->
								
								_this.option_data = JSON.parse(_this.test['option_chain']);
								
								var tbodyRef = document.getElementById('option_analysis_table').getElementsByTagName('tbody')[0];
										
								$("#tbodyid").empty();
								
								var count_row = 0;
								
								var call_oi_val = 0;
																
								var support_resistence_type = $('#id_support_resistence_select').val();
								var open_new_strike_price = null;
								var close_new_strike_price = null;
								var open_call_oi_val = null;
								var close_call_oi_val = null;
								
								if (support_resistence_type == 'open')
								{
									if (support_and_resistence_open_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_nifty_open').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										open_value_array = arr_low.concat(arr_high);
										open_new_strike_price = new_enter_strike_price;
									}
								}
								else if (support_resistence_type == 'close')
								{
									if (support_and_resistence_close_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_nifty_close').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										close_value_array = arr_low.concat(arr_high)
										
										close_new_strike_price = new_enter_strike_price;
									}
								}
								if (support_and_resistence_count == 0)
								{
									<!-- ltp_value_array = new_array; -->
									<!-- ltp_new_strike_price = new_enter_strike_price; -->
									
									var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
									last2 = enter_strike_price.slice(-2);
									var diff = 0;
									var new_enter_strike_price = 0.0;
									if(last2 >= 90)
									{
										diff = 100 - parseInt(last2); 
										new_enter_strike_price = parseInt(enter_strike_price) + diff;
									}
									else if(last2 < 90)
									{
										new_enter_strike_price = enter_strike_price - last2;
									}
									else
									{
										new_enter_strike_price = enter_strike_price;
									}
									<!-- console.log(new_enter_strike_price); -->
									var arr_low = new Array();
									var arr_high = new Array();
									var array_high_val = 0;
									var array_low_val = 0;
									
									var count_temp = 100;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 100;
									}
									arr_low.reverse();
									ltp_value_array = arr_low.concat(arr_high)
									
									ltp_new_strike_price = new_enter_strike_price;
								}
								
								var enter_strike_price = Math.round(parseFloat($('#id_ltp_price').html())).toString();
								last2 = enter_strike_price.slice(-2);
								var diff = 0;
								var new_enter_strike_price = 0.0;
								if(last2 >= 90)
								{
									diff = 100 - parseInt(last2); 
									new_enter_strike_price = parseInt(enter_strike_price) + diff;
								}
								else if(last2 < 90)
								{
									new_enter_strike_price = enter_strike_price - last2;
								}
								else
								{
									new_enter_strike_price = enter_strike_price;
								}
								
								var arr_low = new Array();
								var arr_high = new Array();
								var array_high_val = 0;
								var array_low_val = 0;
								
								if (chain_type == 'NIFTY')
								{
									var count_temp = 50;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 50;
									}
								}
								else if(chain_type == 'BANKNIFTY')
								{
									var count_temp = 100;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 100;
									}
								}
								arr_low.reverse();
								var new_array = arr_low.concat(arr_high)
								
								<!-- if (support_and_resistence_count == 0) -->
								<!-- { -->
									<!-- ltp_value_array = new_array; -->
									<!-- ltp_new_strike_price = new_enter_strike_price; -->
								<!-- } -->
								
								var strike_count = 0;
								var open_strike_count = 0;
								var close_strike_count = 0;
								var ltp_strike_count = 0;
								
								var total_call_oi = 0;
								var total_call_change_oi = 0;
								var total_put_oi = 0;
								var total_put_change_oi = 0;
								
								var long_liquidition_ce_total = 0;
								var short_build_up_ce_total = 0;
								var short_covering_ce_total = 0;
								var long_build_up_ce_total = 0;
								
								var long_liquidition_pe_total = 0;
								var short_build_up_pe_total = 0;
								var short_covering_pe_total = 0;
								var long_build_up_pe_total = 0;

								
								_this.option_data.forEach(function(value) 
								{
									if (count_row == 0)
									{
										newRow = tbodyRef.insertRow();
									}
									if (value.type == "CE")
									{
										total_call_oi = total_call_oi + parseFloat(value.oi);
										total_call_change_oi = total_call_change_oi + parseFloat(value.oi_change);
										price_change_val = parseFloat(value.price_change);
										change_oi_val = parseFloat(value.oi_change);
										
										sbu_obj = newRow.insertCell();
										
										if (price_change_val > 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
											
											long_build_up_ce_total = long_build_up_ce_total + parseFloat(value.oi);
										}
										else if(price_change_val < 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
											
											short_build_up_ce_total = short_build_up_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val > 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
											
											short_covering_ce_total = short_covering_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val < 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
											
											long_liquidition_ce_total = long_liquidition_ce_total + parseFloat(value.oi);
										}
										else
										{
											sbu_obj.style.color="black";
											sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
										}
										if (parseInt(value.strike) <= new_enter_strike_price)
										{
											ce_oi_cell = newRow.insertCell();
											ce_oi_cell.style.backgroundColor = "#FDFD96";
											<!-- ce_oi_cell.appendChild(document.createTextNode(indianRupee(value.oi))); -->
											ce_oi_cell.appendChild(document.createTextNode(value.oi));
											
											ce_oi_change = newRow.insertCell();
											ce_oi_change.style.backgroundColor = "#FDFD96";
											<!-- ce_oi_change.appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											ce_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											ce_ltq = newRow.insertCell();
											ce_ltq.style.backgroundColor = "#FDFD96";
											ce_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											ce_price_change = newRow.insertCell();
											ce_price_change.style.backgroundColor = "#FDFD96";
											ce_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											ce_ltp = newRow.insertCell();
											ce_ltp.style.backgroundColor = "#FDFD96";
											ce_ltp.appendChild(document.createTextNode(value.ltp));
											
											ce_iv = newRow.insertCell();
											ce_iv.style.backgroundColor = "#FDFD96";
											ce_iv.appendChild(document.createTextNode('-'));
											
											call_oi_val = value.oi;
											if (parseInt(new_enter_strike_price) == parseInt(value.strike))
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#62c1e5";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
											else
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#cfecf7";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi))); -->
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode('-'));
											strike_cell_obj = newRow.insertCell();
											strike_cell_obj.style.backgroundColor="#c6e6f5";
											strike_cell_obj.appendChild(document.createTextNode(value.strike));
											call_oi_val = value.oi;
											count_row = 1;
										}
										open_call_oi_val = parseFloat(value.oi);
										close_call_oi_val = parseFloat(value.oi);
									}
									else 
									{
										total_put_oi = total_put_oi + parseFloat(value.oi);
										total_put_change_oi = total_put_change_oi + parseFloat(value.oi_change);
										if (parseInt(value.strike) >= new_enter_strike_price)
										{
											pe_iv = newRow.insertCell();
											pe_iv.style.backgroundColor = "#FDFD96";
											pe_iv.appendChild(document.createTextNode('-'));
											
											pe_ltp = newRow.insertCell();
											pe_ltp.style.backgroundColor = "#FDFD96";
											pe_ltp.appendChild(document.createTextNode(value.ltp));
											
											pe_price_change = newRow.insertCell();
											pe_price_change.style.backgroundColor = "#FDFD96";
											pe_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											pe_ltq = newRow.insertCell();
											pe_ltq.style.backgroundColor = "#FDFD96";
											
											pe_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											pe_oi_change = newRow.insertCell();
											pe_oi_change.style.backgroundColor = "#FDFD96";
											<!-- pe_oi_change.appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											pe_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											pe_oi_cell = newRow.insertCell();
											pe_oi_cell.style.backgroundColor = "#FDFD96";
											<!-- pe_oi_cell.appendChild(document.createTextNode(indianRupee(value.oi))); -->
											pe_oi_cell.appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													<!-- console.log(new_array[strike_count]); -->
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											count_row = 0;
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode('-'));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi))); -->
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											count_row = 0;
										}
									}
								});
								support_and_resistence_count = 1;
								support_and_resistence_open_count = 1;
								support_and_resistence_close_count = 1;

								<!-- sentiments table calculations  -->
								
									$('#id_ll_call').html(indianRupee(long_liquidition_ce_total));
									$('#id_ll_put').html(indianRupee(long_liquidition_pe_total));
									
									$('#id_sbu_call').html(indianRupee(short_build_up_ce_total));
									$('#id_sbu_put').html(indianRupee(short_build_up_pe_total));
									
									$('#id_sv_call').html(indianRupee(short_covering_ce_total));
									$('#id_sv_put').html(indianRupee(short_covering_pe_total));
									
									$('#id_lbu_call').html(indianRupee(long_build_up_ce_total));
									$('#id_lbu_put').html(indianRupee(long_build_up_pe_total));
									
									var bullish_sum = (long_liquidition_ce_total) + (short_build_up_ce_total) + (short_covering_pe_total) + (long_build_up_pe_total)
									var bearish_sum = (long_liquidition_pe_total) + (short_build_up_pe_total) + (short_covering_ce_total) + (long_build_up_ce_total)
									
									var total_bullish_bearish = parseFloat(bullish_sum) + parseFloat(bearish_sum);
									var ce_percentage = ((parseFloat(bullish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									var pe_percentage = ((parseFloat(bearish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									
									create_sentiment_graph(ce_percentage, pe_percentage);
									
									$('#id_bullish_total').html(indianRupee(bullish_sum));
									$('#id_bearish_total').html(indianRupee(bearish_sum));
									
									var sentiment_percentage = ((parseFloat(bullish_sum) - parseFloat(bearish_sum))/parseFloat(bearish_sum)).toFixed(2);
									if (sentiment_percentage > 0)
									{
										$('#id_sentiment_percentage').css('background-color','lightgreen');
										$('#id_sentiment_percentage').css('color','green');
									}
									else
									{
										$('#id_sentiment_percentage').css('background-color','#ffcccb');
										$('#id_sentiment_percentage').css('color','red');
									}
									$('#id_sentiment_percentage').html(sentiment_percentage + "%");

								
								<!-- end sentiments table calculations  -->
								
								<!-- calculation of two greatest -->
									var max = {
										first: 0,
										second: 0,
										
										first1: 0,
										second1: 0,
										
										first2: 0,
										second2: 0,
										
										first3: 0,
										second3: 0,
									};
									<!-- CE OI two greatest element -->
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first<current)
										{
											max.second = max.first;
											max.first = current;
										}
										else if(max.second<current)
										{
											max.second = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										if (max.first == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- CE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first1<current)
										{
											max.second1 = max.first1;
											max.first1 = current;
										}
										else if(max.second1<current)
										{
											max.second1 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										if (max.first1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first2<current)
										{
											max.second2 = max.first2;
											max.first2 = current;
										}
										else if(max.second2<current)
										{
											max.second2 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										if (max.first2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first3<current)
										{
											max.second3 = max.first3;
											max.first3 = current;
										}
										else if(max.second3<current)
										{
											max.second3 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										if (max.first3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
								<!-- end calculation of two greatest -->

								
								newRow= tbodyRef.insertRow();
								
								intraday = newRow.insertCell();
								intraday.style.backgroundColor = 'lightblue';
								intraday.appendChild(document.createTextNode('INTRADAY'));
								
								ce_total_oi = newRow.insertCell();
								ce_total_oi.style.color = "red";
								ce_total_oi.appendChild(document.createTextNode(indianRupee(total_call_oi)));
								
								ce_total_call_oi = newRow.insertCell();
								ce_total_call_oi.style.color = "red";
								ce_total_call_oi.appendChild(document.createTextNode(indianRupee(total_call_change_oi)));
								
								if (total_put_change_oi > total_call_change_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.style.fontSize = "18px";
									bull_bear.colSpan = "2";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								<!-- newRow.insertCell().colSpan = "5"; -->
								
								market_view = newRow.insertCell();
								market_view.style.color = "green";
								market_view.style.backgroundColor = "lightblue";
								market_view.colSpan = "5";
								market_view.style.fontSize = "18px";
								market_view.appendChild(document.createTextNode('MARKET VIEW'));
								
								if (total_put_oi > total_call_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								
								pe_total_oi = newRow.insertCell();
								pe_total_oi.style.color = "red";
								pe_total_oi.appendChild(document.createTextNode(indianRupee(total_put_change_oi)));
								
								pe_total_call_oi = newRow.insertCell();
								pe_total_call_oi.style.color = "red";
								pe_total_call_oi.appendChild(document.createTextNode(indianRupee(total_put_oi)));
								
								
								weekday = newRow.insertCell();
								weekday.style.backgroundColor = 'yellow';
								weekday.colSpan = "1";
								weekday.appendChild(document.createTextNode('WEEKLY'));


							}
						}
					}
				}
			}

			createApp(CoinsApp).mount('#app');
		
		}
		else
		{
			if (socket != null)
			{
				socket.close();
			}
			let { createApp } = Vue;

			let CoinsApp = {
				data(){
					return {
						coin: 'Just a text',
						text: null,
					}
				},
				created(){
					let chain_type = $('#testing :selected').text();
					let exp_date = $.trim($('#id_expiry_date_select :selected').text());


					socket = new WebSocket(`ws://${window.location.host}/ws/optionchain/${chain_type}/${exp_date}/`);

					let _this = this;

					var ltp_value_array = new Array();
					var open_value_array = new Array();
					var close_value_array = new Array();

					socket.onmessage = function(event)
					{
						$('#hideloader').hide();
						_this.test = JSON.parse(event.data);
						
						if (_this.test['option_chain'] == 'Error')
						{
							console.log('Date Exceeds');
							$('#id_date_error').show();
						}
						else
						{
							if (_this.test['live_data'] == 'none')
							{
								
							}
							else
							{
								_this.live_dict = JSON.parse(_this.test['live_data']);
					
								if (_this.live_dict['symbol'] == 'NIFTY 50')
								{
									$('#id_ltp_price').html(_this.live_dict['ltp']);
									
									$('#id_nifty_open').html(_this.live_dict['day_open']);
									$('#id_nifty_close').html(_this.live_dict['prev_day_close']);
									
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_ltp_price').css('color', 'green');
									}
									
									$('#id_nifty_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_nifty_change').html((_this.live_dict['change_perc']).toFixed(2));
								}
								else if(_this.live_dict['symbol'] == 'NIFTY BANK')
								{
									$('#id_bnf_ltp_price').html(_this.live_dict['ltp']);
									
									$('#id_bank_nifty_open').html(_this.live_dict['day_open']);
									$('#id_bank_nifty_close').html(_this.live_dict['prev_day_close']);
									
									if (parseFloat(_this.live_dict['prev_day_close']) > parseFloat(_this.live_dict['ltp']))
									{
										 $('#id_bnf_ltp_price').css('color', 'red');
									}
									else
									{
										$('#id_bnf_ltp_price').css('color', 'green');
									}
									
									$('#id_bnf_diff').html((parseFloat(_this.live_dict['ltp']) - parseFloat(_this.live_dict['prev_day_close'])).toFixed(2));
									
									$('#id_bnf_change').html((_this.live_dict['change_perc']).toFixed(2));
								}

								
								$('#id_date_error').hide();
								<!-- console.log(JSON.parse(_this.test['option_chain'])); -->
								
								_this.option_data = JSON.parse(_this.test['option_chain']);
								
								var tbodyRef = document.getElementById('option_analysis_table').getElementsByTagName('tbody')[0];
										
								$("#tbodyid").empty();
								
								var count_row = 0;
								
								var call_oi_val = 0;
								
								var support_resistence_type = $('#id_support_resistence_select').val();
								var open_new_strike_price = null;
								var close_new_strike_price = null;
								var open_call_oi_val = null;
								var close_call_oi_val = null;
								
								if (support_resistence_type == 'open')
								{
									if (support_and_resistence_open_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_bank_nifty_open').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										open_value_array = arr_low.concat(arr_high);
										open_new_strike_price = new_enter_strike_price;
									}
								}
								else if (support_resistence_type == 'close')
								{
									if (support_and_resistence_close_count == 0)
									{
										var enter_strike_price = Math.round(parseFloat($('#id_bank_nifty_close').val())).toString();
										last2 = enter_strike_price.slice(-2);
										var diff = 0;
										var new_enter_strike_price = 0.0;
										if(last2 >= 90)
										{
											diff = 100 - parseInt(last2); 
											new_enter_strike_price = parseInt(enter_strike_price) + diff;
										}
										else if(last2 < 90)
										{
											new_enter_strike_price = enter_strike_price - last2;
										}
										else
										{
											new_enter_strike_price = enter_strike_price;
										}
										
										var arr_low = new Array();
										var arr_high = new Array();
										var array_high_val = 0;
										var array_low_val = 0;
										
										var count_temp = 100;
										arr_low.push(parseInt(new_enter_strike_price));
										for(var i = 0; i<4; i++)
										{
											arr_low.push(parseInt(new_enter_strike_price) - count_temp);
											arr_high.push(parseInt(new_enter_strike_price) + count_temp);
											
											count_temp = count_temp + 100;
										}
										arr_low.reverse();
										close_value_array = arr_low.concat(arr_high)
										
										close_new_strike_price = new_enter_strike_price;
									}
								}
					
								var enter_strike_price = Math.round(parseFloat($('#id_bnf_ltp_price').html())).toString();
								last2 = enter_strike_price.slice(-2);
								var diff = 0;
								var new_enter_strike_price = 0.0;
								if(last2 >= 90)
								{
									diff = 100 - parseInt(last2); 
									new_enter_strike_price = parseInt(enter_strike_price) + diff;
								}
								else if(last2 < 90)
								{
									new_enter_strike_price = enter_strike_price - last2;
								}
								else
								{
									new_enter_strike_price = enter_strike_price;
								}
								
								var arr_low = new Array();
								var arr_high = new Array();
								var array_high_val = 0;
								var array_low_val = 0;
								
								if (chain_type == 'NIFTY')
								{
									var count_temp = 50;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 50;
									}
								}
								else if(chain_type == 'BANKNIFTY')
								{
									var count_temp = 100;
									arr_low.push(parseInt(new_enter_strike_price));
									for(var i = 0; i<4; i++)
									{
										arr_low.push(parseInt(new_enter_strike_price) - count_temp);
										arr_high.push(parseInt(new_enter_strike_price) + count_temp);
										
										count_temp = count_temp + 100;
									}
								}
								
								arr_low.reverse();
								var new_array = arr_low.concat(arr_high)
								
								if (support_and_resistence_count == 0)
								{
									ltp_value_array = new_array;
									ltp_new_strike_price = new_enter_strike_price;
								}
								
								var strike_count = 0;
								var open_strike_count = 0;
								var close_strike_count = 0;
								var ltp_strike_count = 0;
								
								var total_call_oi = 0;
								var total_call_change_oi = 0;
								var total_put_oi = 0;
								var total_put_change_oi = 0;
								
								var long_liquidition_ce_total = 0;
								var short_build_up_ce_total = 0;
								var short_covering_ce_total = 0;
								var long_build_up_ce_total = 0;
								
								var long_liquidition_pe_total = 0;
								var short_build_up_pe_total = 0;
								var short_covering_pe_total = 0;
								var long_build_up_pe_total = 0;

								
								_this.option_data.forEach(function(value) 
								{
									if (count_row == 0)
									{
										newRow = tbodyRef.insertRow();
									}
									if (value.type == "CE")
									{
										total_call_oi = total_call_oi + parseFloat(value.oi);
										total_call_change_oi = total_call_change_oi + parseFloat(value.oi_change);
										price_change_val = parseFloat(value.price_change);
										change_oi_val = parseFloat(value.oi_change);
										
										sbu_obj = newRow.insertCell();
										
										if (price_change_val > 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
											
											long_build_up_ce_total = long_build_up_ce_total + parseFloat(value.oi);
										}
										else if(price_change_val < 0 && change_oi_val > 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
											
											short_build_up_ce_total = short_build_up_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val > 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="black";
											sbu_obj.style.backgroundColor="lightgreen";
											sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
											
											short_covering_ce_total = short_covering_ce_total + parseFloat(value.oi);
										}
										else if (price_change_val < 0 && change_oi_val < 0)
										{
											sbu_obj.style.color="white";
											sbu_obj.style.backgroundColor="red";
											sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
											
											long_liquidition_ce_total = long_liquidition_ce_total + parseFloat(value.oi);
										}
										else
										{
											sbu_obj.style.color="black";
											sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
										}
										if (parseInt(value.strike) <= new_enter_strike_price)
										{
											ce_oi_cell = newRow.insertCell();
											ce_oi_cell.style.backgroundColor = "#FDFD96";
											<!-- ce_oi_cell.appendChild(document.createTextNode(indianRupee(value.oi))); -->
											ce_oi_cell.appendChild(document.createTextNode(value.oi));
											
											ce_oi_change = newRow.insertCell();
											ce_oi_change.style.backgroundColor = "#FDFD96";
											ce_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											ce_ltq = newRow.insertCell();
											ce_ltq.style.backgroundColor = "#FDFD96";
											ce_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											ce_price_change = newRow.insertCell();
											ce_price_change.style.backgroundColor = "#FDFD96";
											ce_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											ce_ltp = newRow.insertCell();
											ce_ltp.style.backgroundColor = "#FDFD96";
											ce_ltp.appendChild(document.createTextNode(value.ltp));
											
											ce_iv = newRow.insertCell();
											ce_iv.style.backgroundColor = "#FDFD96";
											ce_iv.appendChild(document.createTextNode('-'));
											
											call_oi_val = value.oi;
											if (parseInt(new_enter_strike_price) == parseInt(value.strike))
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#62c1e5";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
											else
											{
												strike_cell_obj = newRow.insertCell();
												strike_cell_obj.style.backgroundColor="#cfecf7";
												strike_cell_obj.appendChild(document.createTextNode(value.strike));
												call_oi_val = value.oi;
												count_row = 1;
											}
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi))); -->
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode('-'));
											strike_cell_obj = newRow.insertCell();
											strike_cell_obj.style.backgroundColor="#c6e6f5";
											strike_cell_obj.appendChild(document.createTextNode(value.strike));
											call_oi_val = value.oi;
											count_row = 1;
										}
										open_call_oi_val = parseFloat(value.oi);
										close_call_oi_val = parseFloat(value.oi);
									}
									else
									{
										total_put_oi = total_put_oi + parseFloat(value.oi);
										total_put_change_oi = total_put_change_oi + parseFloat(value.oi_change);
										if (parseInt(value.strike) >= new_enter_strike_price)
										{
											pe_iv = newRow.insertCell();
											pe_iv.style.backgroundColor = "#FDFD96";
											pe_iv.appendChild(document.createTextNode('-'));
											
											pe_ltp = newRow.insertCell();
											pe_ltp.style.backgroundColor = "#FDFD96";
											pe_ltp.appendChild(document.createTextNode(value.ltp));
											
											pe_price_change = newRow.insertCell();
											pe_price_change.style.backgroundColor = "#FDFD96";
											pe_price_change.appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											
											pe_ltq = newRow.insertCell();
											pe_ltq.style.backgroundColor = "#FDFD96";
											
											pe_ltq.appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											
											pe_oi_change = newRow.insertCell();
											pe_oi_change.style.backgroundColor = "#FDFD96";
											<!-- pe_oi_change.appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											pe_oi_change.appendChild(document.createTextNode(value.oi_change));
											
											
											pe_oi_cell = newRow.insertCell();
											pe_oi_cell.style.backgroundColor = "#FDFD96";
											<!-- pe_oi_cell.appendChild(document.createTextNode(indianRupee(value.oi))); -->
											pe_oi_cell.appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(open_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(close_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													<!-- console.log(new_array[strike_count]); -->
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											count_row = 0;
										}
										else
										{
											newRow.insertCell().appendChild(document.createTextNode('-'));
											newRow.insertCell().appendChild(document.createTextNode(value.ltp));
											newRow.insertCell().appendChild(document.createTextNode(parseFloat(value.price_change).toFixed(2)));
											newRow.insertCell().appendChild(document.createTextNode(indianRupee(parseFloat(value.ltq))));
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi_change))); -->
											<!-- newRow.insertCell().appendChild(document.createTextNode(indianRupee(value.oi))); -->
											newRow.insertCell().appendChild(document.createTextNode(value.oi_change));
											newRow.insertCell().appendChild(document.createTextNode(value.oi));
											
											price_change_val = parseFloat(value.price_change);
											change_oi_val = parseFloat(value.oi_change);
											
											sbu_obj = newRow.insertCell();
											
											if (price_change_val > 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('LONG BUILD UP'));
												
												long_build_up_pe_total = long_build_up_pe_total + parseFloat(value.oi);
											}
											else if(price_change_val < 0 && change_oi_val > 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('SHORT BUILD UP'));
												
												short_build_up_pe_total = short_build_up_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val > 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="white";
												sbu_obj.style.backgroundColor="red";
												sbu_obj.appendChild(document.createTextNode('SHORT COVERING'));
												
												short_covering_pe_total = short_covering_pe_total + parseFloat(value.oi);
											}
											else if (price_change_val < 0 && change_oi_val < 0)
											{
												sbu_obj.style.color="black";
												sbu_obj.style.backgroundColor="lightgreen";
												sbu_obj.appendChild(document.createTextNode('LONG LIQUIDATION'));
												
												long_liquidition_pe_total = long_liquidition_pe_total + parseFloat(value.oi);
											}
											else
											{
												sbu_obj.style.color="black";
												sbu_obj.appendChild(document.createTextNode('NOT ENOUGH DATA'));
											}
											
											if (support_resistence_type == 'open')
											{
												if(open_strike_count < 9)
												{
													if (open_value_array[open_strike_count] == value.strike)
													{
														if (support_and_resistence_open_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (open_strike_count+1) +'_select', 'id_strike_price_'+(open_strike_count+1));
														}
														if (open_value_array[open_strike_count] == open_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(open_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(open_strike_count)+1)).html(open_value_array[open_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(open_call_oi_val));
														$('#id_pe_oi_' + (parseInt(open_strike_count)+1)).html(indianRupee(value.oi));
														open_strike_count = open_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'close')
											{
												if(close_strike_count < 9)
												{
													if (close_value_array[close_strike_count] == value.strike)
													{
														if (support_and_resistence_close_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (close_strike_count+1) +'_select', 'id_strike_price_'+(close_strike_count+1));
														}
														if (close_value_array[close_strike_count] == close_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(close_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(close_strike_count)+1)).html(close_value_array[close_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(close_strike_count)+1)).html(indianRupee(value.oi));
														close_strike_count = close_strike_count + 1;
													}
												}
											}
											
											if (support_resistence_type == 'ltp')
											{
												if(ltp_strike_count < 9)
												{
													if (ltp_value_array[ltp_strike_count] == value.strike)
													{
														if (support_and_resistence_count == 0)
														{
															get_support_resistence_class(value.strike, 'id_sentiment_analysis_'+ (ltp_strike_count+1) +'_select', 'id_strike_price_'+(ltp_strike_count+1));
														}
														if (ltp_value_array[ltp_strike_count] == ltp_new_strike_price)
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
															<!-- $('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).css('background-color','lightblue'); -->
														}
														else
														{
															$('#id_strike_price_' + (parseInt(ltp_strike_count)+1)).html(ltp_value_array[ltp_strike_count]);
														}
														$('#id_ce_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(close_call_oi_val));
														$('#id_pe_oi_' + (parseInt(ltp_strike_count)+1)).html(indianRupee(value.oi));
														
														$('#id_pcr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(value.oi)/parseFloat(open_call_oi_val)).toFixed(2)));
														
														$('#id_cpr_' + (parseInt(ltp_strike_count)+1)).html(((parseFloat(open_call_oi_val)/parseFloat(value.oi)).toFixed(2)));
														
														ltp_strike_count = ltp_strike_count + 1;
													}
												}
											}
											
											if (strike_count < 9)
											{
												if (new_array[strike_count] == value.strike)
												{
													if (new_array[strike_count] == new_enter_strike_price)
													{
														pe_pcr = newRow.insertCell()
														pe_pcr.style.backgroundColor = 'yellow';
														pe_pcr.appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													else
													{
														newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													}
													net_change_val = (parseFloat(value.oi)-parseFloat(call_oi_val));
													pe_net_change = newRow.insertCell();
													if (net_change_val > 0)
													{
														pe_net_change.style.color = 'green';
														pe_net_change.style.backgroundColor = 'lightgreen';
													}
													else
													{
														pe_net_change.style.color = 'red';
														pe_net_change.style.backgroundColor = '#ffcccb';
													}
													pe_net_change.appendChild(document.createTextNode(indianRupee(net_change_val)));
													strike_count = strike_count + 1;
												}
												else
												{
													newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
													newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
												}
											}	
											else
											{
												newRow.insertCell().appendChild(document.createTextNode(((parseFloat(value.oi)/parseFloat(call_oi_val)).toFixed(2))));
												newRow.insertCell().appendChild(document.createTextNode(indianRupee((parseFloat(value.oi)-parseFloat(call_oi_val)))));
											}
											
											count_row = 0;
										}
									}
								});
								support_and_resistence_count = 1;
								support_and_resistence_open_count = 1;
								support_and_resistence_close_count = 1;

								<!-- sentiments table calculations  -->
								
									$('#id_ll_call').html(indianRupee(long_liquidition_ce_total));
									$('#id_ll_put').html(indianRupee(long_liquidition_pe_total));
									
									$('#id_sbu_call').html(indianRupee(short_build_up_ce_total));
									$('#id_sbu_put').html(indianRupee(short_build_up_pe_total));
									
									$('#id_sv_call').html(indianRupee(short_covering_ce_total));
									$('#id_sv_put').html(indianRupee(short_covering_pe_total));
									
									$('#id_lbu_call').html(indianRupee(long_build_up_ce_total));
									$('#id_lbu_put').html(indianRupee(long_build_up_pe_total));
									
									var bullish_sum = (long_liquidition_ce_total) + (short_build_up_ce_total) + (short_covering_pe_total) + (long_build_up_pe_total)
									var bearish_sum = (long_liquidition_pe_total) + (short_build_up_pe_total) + (short_covering_ce_total) + (long_build_up_ce_total)
									
									var total_bullish_bearish = parseFloat(bullish_sum) + parseFloat(bearish_sum);
									var ce_percentage = ((parseFloat(bullish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									var pe_percentage = ((parseFloat(bearish_sum)/parseFloat(total_bullish_bearish))*100).toFixed(2)
									
									create_sentiment_graph(ce_percentage, pe_percentage);
									
									$('#id_bullish_total').html(indianRupee(bullish_sum));
									$('#id_bearish_total').html(indianRupee(bearish_sum));
									
									var sentiment_percentage = ((parseFloat(bullish_sum) - parseFloat(bearish_sum))/parseFloat(bearish_sum)).toFixed(2);
									if (sentiment_percentage > 0)
									{
										$('#id_sentiment_percentage').css('background-color','lightgreen');
										$('#id_sentiment_percentage').css('color','green');
									}
									else
									{
										$('#id_sentiment_percentage').css('background-color','#ffcccb');
										$('#id_sentiment_percentage').css('color','red');
									}
									$('#id_sentiment_percentage').html(sentiment_percentage + "%");

								
								<!-- end sentiments table calculations  -->
								
								<!-- calculation of two greatest -->
									var max = {
										first: 0,
										second: 0,
										
										first1: 0,
										second1: 0,
										
										first2: 0,
										second2: 0,
										
										first3: 0,
										second3: 0,
									};
									<!-- CE OI two greatest element -->
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first<current)
										{
											max.second = max.first;
											max.first = current;
										}
										else if(max.second<current)
										{
											max.second = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(2)").each(function(index, elem) {
										if (max.first == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- CE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first1<current)
										{
											max.second1 = max.first1;
											max.first1 = current;
										}
										else if(max.second1<current)
										{
											max.second1 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(3)").each(function(index, elem) {
										if (max.first1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second1 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first2<current)
										{
											max.second2 = max.first2;
											max.first2 = current;
										}
										else if(max.second2<current)
										{
											max.second2 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(13)").each(function(index, elem) {
										if (max.first2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second2 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
									<!-- PE Change OI two greatest element -->
									
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										var current = parseInt(elem.innerHTML);
										if(max.first3<current)
										{
											max.second3 = max.first3;
											max.first3 = current;
										}
										else if(max.second3<current)
										{
											max.second3 = current;
										}
									});
									$("#option_analysis_table tr td:nth-child(14)").each(function(index, elem) {
										if (max.first3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										if (max.second3 == elem.innerHTML)
										{
											elem.style.backgroundColor = "skyblue";
										}
										elem.innerHTML = indianRupee(elem.innerHTML);
									});
									
								<!-- end calculation of two greatest -->

								
								newRow= tbodyRef.insertRow();
								
								intraday = newRow.insertCell();
								intraday.style.backgroundColor = 'lightblue';
								intraday.appendChild(document.createTextNode('INTRADAY'));
								
								ce_total_oi = newRow.insertCell();
								ce_total_oi.style.color = "red";
								ce_total_oi.appendChild(document.createTextNode(indianRupee(total_call_oi)));
								
								ce_total_call_oi = newRow.insertCell();
								ce_total_call_oi.style.color = "red";
								ce_total_call_oi.appendChild(document.createTextNode(indianRupee(total_call_change_oi)));
								
								if (total_put_change_oi > total_call_change_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.style.fontSize = "18px";
									bull_bear.colSpan = "2";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								 
								<!-- newRow.insertCell().colSpan = "5"; -->
								
								market_view = newRow.insertCell();
								market_view.style.color = "green";
								market_view.style.backgroundColor = "lightblue";
								market_view.colSpan = "5";
								market_view.style.fontSize = "18px";
								market_view.appendChild(document.createTextNode('MARKET VIEW'));
								
								if (total_put_oi > total_call_oi)
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "green";
									bull_bear.style.backgroundColor = "lightgreen";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BULLISH'));
								}
								else
								{
									bull_bear = newRow.insertCell();
									bull_bear.style.color = "red";
									bull_bear.style.backgroundColor = "#ffcccb";
									bull_bear.colSpan = "2";
									bull_bear.style.fontSize = "18px";
									bull_bear.appendChild(document.createTextNode('BEARISH'));
								}
								
								
								pe_total_oi = newRow.insertCell();
								pe_total_oi.style.color = "red";
								pe_total_oi.appendChild(document.createTextNode(indianRupee(total_put_change_oi)));
								
								pe_total_call_oi = newRow.insertCell();
								pe_total_call_oi.style.color = "red";
								pe_total_call_oi.appendChild(document.createTextNode(indianRupee(total_put_oi)));
								
								
								weekday = newRow.insertCell();
								weekday.style.backgroundColor = 'yellow';
								weekday.colSpan = "1";
								weekday.appendChild(document.createTextNode('WEEKLY'));


							}
						}
					}
				}
			}
			createApp(CoinsApp).mount('#app');
		}
	}
}
<!-- END EXPIRY DATE SELECT CHANGE -->
</script>

<script>  
var user_id = '{{request.session.user_id}}';

function support_resistence_ajax_call(strike_price, analysis)
{
	$.ajax({
		method: "POST",
		url: "/add_Support_Resistence/",
		data: {
			'user_id':user_id,
			'strike_price':strike_price,
			'analysis':analysis,
		},
		success: function (response) 
		{	
			if(response.status == '1'){}
else{}
		}
	});
}
function save_sentiment_1(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_1').html();
	analysis = $('#id_sentiment_analysis_1_select').val();	
	$('#id_strike_price_1').removeClass();
	$('#id_strike_price_1').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_2(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_2').html();
	analysis = $('#id_sentiment_analysis_2_select').val();	
	$('#id_strike_price_2').removeClass();
	$('#id_strike_price_2').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_3(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_3').html();
	analysis = $('#id_sentiment_analysis_3_select').val();	
	$('#id_strike_price_3').removeClass();
	$('#id_strike_price_3').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_4(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_4').html();
	analysis = $('#id_sentiment_analysis_4_select').val();
	$('#id_strike_price_4').removeClass();
	$('#id_strike_price_4').addClass(analysis);	
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_5(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_5').html();
	analysis = $('#id_sentiment_analysis_5_select').val();	
	$('#id_strike_price_5').removeClass();
	$('#id_strike_price_5').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_6(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_6').html();
	analysis = $('#id_sentiment_analysis_6_select').val();	
	$('#id_strike_price_6').removeClass();
	$('#id_strike_price_6').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_7(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_7').html();
	analysis = $('#id_sentiment_analysis_7_select').val();	
	$('#id_strike_price_7').removeClass();
	$('#id_strike_price_7').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_8(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_8').html();
	analysis = $('#id_sentiment_analysis_8_select').val();	
	$('#id_strike_price_8').removeClass();
	$('#id_strike_price_8').addClass(analysis);
	support_resistence_ajax_call(strike_price, analysis);
}
function save_sentiment_9(value)
{
	value.className=value.options[value.selectedIndex].className + " select_support_resistence";
	strike_price = $('#id_strike_price_9').html();
	analysis = $('#id_sentiment_analysis_9_select').val();
	$('#id_strike_price_9').removeClass();
	$('#id_strike_price_9').addClass(analysis);	
	support_resistence_ajax_call(strike_price, analysis);
}


<!-- ------------------------ change ltp open close ------------------------- -->

function change_l_o_c()
{
	change_support_resistence_support();
}
<!-- ------------------------ end change ltp/open/close --------------------- -->
</script>

{% include "Panel/footer.html" %}				 